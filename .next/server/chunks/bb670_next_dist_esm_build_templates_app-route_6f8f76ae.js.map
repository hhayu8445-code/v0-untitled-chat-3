{"version":3,"sources":["../../../../../../Pictures/APPLICATION%20DECRYPT%20FULL%20NO%20FXAP/TOOLS%20WEBSITE/app/api/database/migrate/route.ts","../../../../../../Pictures/APPLICATION%20DECRYPT%20FULL%20NO%20FXAP/TOOLS%20WEBSITE/node_modules/next/dist/esm/build/templates/app-route.js"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport { createAdminClient } from \"@/lib/supabase/server\"\n\nexport async function POST() {\n  try {\n    console.log(\"ðŸš€ Starting database migration...\")\n\n    const supabase = await createAdminClient()\n\n    // Check if tables already exist\n    const { data: existingTables } = await supabase\n      .from(\"information_schema.tables\")\n      .select(\"table_name\")\n      .eq(\"table_schema\", \"public\")\n\n    console.log(\"ðŸ“Š Checking existing tables...\")\n\n    // Schema SQL\n    const schemaSQL = `\n-- Enable UUID extension\nCREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";\n\n-- Users Table\nCREATE TABLE IF NOT EXISTS public.users (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  discord_id TEXT UNIQUE NOT NULL,\n  username TEXT NOT NULL,\n  discriminator TEXT,\n  avatar TEXT,\n  email TEXT,\n  role TEXT DEFAULT 'user' CHECK (role IN ('user', 'moderator', 'admin', 'superadmin')),\n  coins INTEGER DEFAULT 0 CHECK (coins >= 0),\n  is_banned BOOLEAN DEFAULT FALSE,\n  ban_reason TEXT,\n  banned_until TIMESTAMP WITH TIME ZONE,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  last_seen TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Assets Table\nCREATE TABLE IF NOT EXISTS public.assets (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  title TEXT NOT NULL,\n  description TEXT,\n  category TEXT NOT NULL CHECK (category IN ('scripts', 'mlo', 'vehicles', 'eup', 'weapons', 'props', 'other')),\n  framework TEXT CHECK (framework IN ('qbcore', 'esx', 'qbox', 'standalone', 'other')),\n  author_id UUID REFERENCES public.users(id) ON DELETE CASCADE,\n  price INTEGER DEFAULT 0 CHECK (price >= 0),\n  is_free BOOLEAN DEFAULT TRUE,\n  download_url TEXT,\n  image_url TEXT,\n  preview_images TEXT[],\n  tags TEXT[],\n  version TEXT DEFAULT '1.0.0',\n  downloads INTEGER DEFAULT 0,\n  likes INTEGER DEFAULT 0,\n  views INTEGER DEFAULT 0,\n  file_size TEXT,\n  requirements TEXT[],\n  status TEXT DEFAULT 'pending' CHECK (status IN ('pending', 'approved', 'rejected', 'archived')),\n  featured BOOLEAN DEFAULT FALSE,\n  trending BOOLEAN DEFAULT FALSE,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Downloads Table\nCREATE TABLE IF NOT EXISTS public.downloads (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  asset_id UUID REFERENCES public.assets(id) ON DELETE CASCADE,\n  user_id UUID REFERENCES public.users(id) ON DELETE CASCADE,\n  coins_spent INTEGER DEFAULT 0,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  UNIQUE(asset_id, user_id)\n);\n\n-- Likes Table\nCREATE TABLE IF NOT EXISTS public.likes (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  user_id UUID REFERENCES public.users(id) ON DELETE CASCADE,\n  target_id UUID NOT NULL,\n  target_type TEXT NOT NULL CHECK (target_type IN ('asset', 'thread', 'reply')),\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  UNIQUE(user_id, target_id, target_type)\n);\n\n-- Forum Categories Table\nCREATE TABLE IF NOT EXISTS public.forum_categories (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  name TEXT NOT NULL UNIQUE,\n  description TEXT,\n  icon TEXT,\n  color TEXT,\n  sort_order INTEGER DEFAULT 0,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Forum Threads Table\nCREATE TABLE IF NOT EXISTS public.forum_threads (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  category_id UUID REFERENCES public.forum_categories(id) ON DELETE CASCADE,\n  author_id UUID REFERENCES public.users(id) ON DELETE CASCADE,\n  title TEXT NOT NULL,\n  content TEXT NOT NULL,\n  is_pinned BOOLEAN DEFAULT FALSE,\n  is_locked BOOLEAN DEFAULT FALSE,\n  is_deleted BOOLEAN DEFAULT FALSE,\n  status TEXT DEFAULT 'pending' CHECK (status IN ('pending', 'approved', 'rejected')),\n  views INTEGER DEFAULT 0,\n  likes INTEGER DEFAULT 0,\n  reply_count INTEGER DEFAULT 0,\n  last_reply_at TIMESTAMP WITH TIME ZONE,\n  last_reply_by UUID REFERENCES public.users(id),\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Forum Replies Table\nCREATE TABLE IF NOT EXISTS public.forum_replies (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  thread_id UUID REFERENCES public.forum_threads(id) ON DELETE CASCADE,\n  author_id UUID REFERENCES public.users(id) ON DELETE CASCADE,\n  content TEXT NOT NULL,\n  is_deleted BOOLEAN DEFAULT FALSE,\n  likes INTEGER DEFAULT 0,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Activities Table\nCREATE TABLE IF NOT EXISTS public.activities (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  user_id UUID REFERENCES public.users(id) ON DELETE CASCADE,\n  username TEXT NOT NULL,\n  avatar TEXT,\n  action TEXT NOT NULL,\n  target TEXT,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Notifications Table\nCREATE TABLE IF NOT EXISTS public.notifications (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  user_id UUID REFERENCES public.users(id) ON DELETE CASCADE,\n  title TEXT NOT NULL,\n  message TEXT NOT NULL,\n  type TEXT DEFAULT 'info' CHECK (type IN ('info', 'success', 'warning', 'error')),\n  is_read BOOLEAN DEFAULT FALSE,\n  link TEXT,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Public Notifications Table\nCREATE TABLE IF NOT EXISTS public.public_notifications (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  title TEXT NOT NULL,\n  message TEXT NOT NULL,\n  type TEXT DEFAULT 'info' CHECK (type IN ('info', 'success', 'warning', 'error')),\n  is_active BOOLEAN DEFAULT TRUE,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Announcements Table\nCREATE TABLE IF NOT EXISTS public.announcements (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  title TEXT NOT NULL,\n  content TEXT NOT NULL,\n  author_id UUID REFERENCES public.users(id) ON DELETE CASCADE,\n  is_pinned BOOLEAN DEFAULT FALSE,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Banners Table\nCREATE TABLE IF NOT EXISTS public.banners (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  title TEXT NOT NULL,\n  description TEXT,\n  image_url TEXT NOT NULL,\n  link_url TEXT,\n  sort_order INTEGER DEFAULT 0,\n  is_active BOOLEAN DEFAULT TRUE,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Coin Transactions Table\nCREATE TABLE IF NOT EXISTS public.coin_transactions (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  user_id UUID REFERENCES public.users(id) ON DELETE CASCADE,\n  amount INTEGER NOT NULL,\n  type TEXT NOT NULL CHECK (type IN ('earn', 'spend', 'admin_add', 'admin_remove', 'daily_reward', 'spin_win')),\n  description TEXT,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Daily Rewards Table\nCREATE TABLE IF NOT EXISTS public.daily_rewards (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  user_id UUID REFERENCES public.users(id) ON DELETE CASCADE,\n  claimed_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  reward_amount INTEGER NOT NULL,\n  UNIQUE(user_id, claimed_at::DATE)\n);\n\n-- Messages Table\nCREATE TABLE IF NOT EXISTS public.messages (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  sender_id UUID REFERENCES public.users(id) ON DELETE CASCADE,\n  recipient_id UUID REFERENCES public.users(id) ON DELETE CASCADE,\n  content TEXT NOT NULL,\n  is_read BOOLEAN DEFAULT FALSE,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Spin Wheel Tables\nCREATE TABLE IF NOT EXISTS public.spin_wheel_prizes (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  name TEXT NOT NULL,\n  type TEXT NOT NULL CHECK (type IN ('coins', 'item', 'custom')),\n  value INTEGER,\n  description TEXT,\n  color TEXT DEFAULT '#3b82f6',\n  probability NUMERIC(5,2) DEFAULT 10.00 CHECK (probability >= 0 AND probability <= 100),\n  is_active BOOLEAN DEFAULT TRUE,\n  sort_order INTEGER DEFAULT 0,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\nCREATE TABLE IF NOT EXISTS public.spin_wheel_settings (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  spins_per_day INTEGER DEFAULT 1 CHECK (spins_per_day > 0),\n  is_enabled BOOLEAN DEFAULT TRUE,\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\nCREATE TABLE IF NOT EXISTS public.spin_history (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  user_id UUID REFERENCES public.users(id) ON DELETE CASCADE,\n  prize_id UUID REFERENCES public.spin_wheel_prizes(id) ON DELETE SET NULL,\n  prize_name TEXT NOT NULL,\n  coins_won INTEGER DEFAULT 0,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\nCREATE TABLE IF NOT EXISTS public.spin_wheel_eligible_users (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  user_id UUID REFERENCES public.users(id) ON DELETE CASCADE,\n  spins_remaining INTEGER DEFAULT 1,\n  last_spin_at TIMESTAMP WITH TIME ZONE,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  UNIQUE(user_id)\n);\n\nCREATE TABLE IF NOT EXISTS public.spin_wheel_force_wins (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  user_id UUID REFERENCES public.users(id) ON DELETE CASCADE,\n  prize_id UUID REFERENCES public.spin_wheel_prizes(id) ON DELETE CASCADE,\n  is_active BOOLEAN DEFAULT TRUE,\n  used_at TIMESTAMP WITH TIME ZONE,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Testimonials Table\nCREATE TABLE IF NOT EXISTS public.testimonials (\n  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n  user_id UUID REFERENCES public.users(id) ON DELETE CASCADE,\n  username TEXT NOT NULL,\n  avatar TEXT,\n  content TEXT NOT NULL,\n  rating INTEGER DEFAULT 5 CHECK (rating >= 1 AND rating <= 5),\n  is_featured BOOLEAN DEFAULT FALSE,\n  is_approved BOOLEAN DEFAULT FALSE,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create Indexes\nCREATE INDEX IF NOT EXISTS idx_users_discord_id ON public.users(discord_id);\nCREATE INDEX IF NOT EXISTS idx_users_role ON public.users(role);\nCREATE INDEX IF NOT EXISTS idx_assets_author_id ON public.assets(author_id);\nCREATE INDEX IF NOT EXISTS idx_assets_category ON public.assets(category);\nCREATE INDEX IF NOT EXISTS idx_assets_status ON public.assets(status);\nCREATE INDEX IF NOT EXISTS idx_downloads_asset_id ON public.downloads(asset_id);\nCREATE INDEX IF NOT EXISTS idx_downloads_user_id ON public.downloads(user_id);\nCREATE INDEX IF NOT EXISTS idx_likes_target ON public.likes(target_id, target_type);\nCREATE INDEX IF NOT EXISTS idx_forum_threads_category ON public.forum_threads(category_id);\nCREATE INDEX IF NOT EXISTS idx_forum_threads_author ON public.forum_threads(author_id);\nCREATE INDEX IF NOT EXISTS idx_forum_replies_thread ON public.forum_replies(thread_id);\nCREATE INDEX IF NOT EXISTS idx_activities_user ON public.activities(user_id);\nCREATE INDEX IF NOT EXISTS idx_notifications_user ON public.notifications(user_id);\nCREATE INDEX IF NOT EXISTS idx_coin_transactions_user ON public.coin_transactions(user_id);\nCREATE INDEX IF NOT EXISTS idx_messages_sender ON public.messages(sender_id);\nCREATE INDEX IF NOT EXISTS idx_messages_recipient ON public.messages(recipient_id);\nCREATE INDEX IF NOT EXISTS idx_spin_history_user ON public.spin_history(user_id);\n`\n\n    // Execute schema creation\n    const statements = schemaSQL\n      .split(\";\")\n      .map((s) => s.trim())\n      .filter((s) => s.length > 0)\n\n    for (const statement of statements) {\n      const { error } = await supabase.rpc(\"exec_sql\", { sql: statement })\n      if (error && !error.message.includes(\"already exists\")) {\n        console.error(\"Error executing statement:\", error)\n      }\n    }\n\n    console.log(\"âœ… Schema created successfully\")\n\n    // Enable RLS and create policies\n    await enableRLS(supabase)\n\n    // Insert seed data\n    await seedData(supabase)\n\n    console.log(\"ðŸŽ‰ Database migration completed!\")\n\n    return NextResponse.json({\n      success: true,\n      message: \"Database migrated successfully\",\n    })\n  } catch (error) {\n    console.error(\"âŒ Migration error:\", error)\n    return NextResponse.json(\n      {\n        success: false,\n        error: error instanceof Error ? error.message : \"Unknown error\",\n      },\n      { status: 500 },\n    )\n  }\n}\n\nasync function enableRLS(supabase: any) {\n  console.log(\"ðŸ”’ Enabling Row Level Security...\")\n\n  const rlsStatements = [\n    \"ALTER TABLE public.users ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.assets ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.downloads ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.likes ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.forum_categories ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.forum_threads ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.forum_replies ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.activities ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.notifications ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.public_notifications ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.announcements ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.banners ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.coin_transactions ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.daily_rewards ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.messages ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.spin_wheel_prizes ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.spin_wheel_settings ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.spin_history ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.spin_wheel_eligible_users ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.spin_wheel_force_wins ENABLE ROW LEVEL SECURITY;\",\n    \"ALTER TABLE public.testimonials ENABLE ROW LEVEL SECURITY;\",\n  ]\n\n  for (const statement of rlsStatements) {\n    await supabase.rpc(\"exec_sql\", { sql: statement })\n  }\n\n  console.log(\"âœ… RLS enabled\")\n}\n\nasync function seedData(supabase: any) {\n  console.log(\"ðŸŒ± Seeding data...\")\n\n  // Insert forum categories\n  const { error: catError } = await supabase.from(\"forum_categories\").upsert(\n    [\n      {\n        name: \"General Discussion\",\n        description: \"General FiveM discussions and community chat\",\n        icon: \"ðŸ’¬\",\n        color: \"#3b82f6\",\n        sort_order: 1,\n      },\n      {\n        name: \"Script Help\",\n        description: \"Get help with FiveM scripts and development\",\n        icon: \"ðŸ”§\",\n        color: \"#10b981\",\n        sort_order: 2,\n      },\n      {\n        name: \"Server Showcase\",\n        description: \"Show off your FiveM server\",\n        icon: \"ðŸŽ®\",\n        color: \"#8b5cf6\",\n        sort_order: 3,\n      },\n      {\n        name: \"Trading & Sales\",\n        description: \"Buy, sell, and trade FiveM resources\",\n        icon: \"ðŸ’°\",\n        color: \"#f59e0b\",\n        sort_order: 4,\n      },\n      {\n        name: \"Suggestions\",\n        description: \"Suggest new features and improvements\",\n        icon: \"ðŸ’¡\",\n        color: \"#06b6d4\",\n        sort_order: 5,\n      },\n      {\n        name: \"Bug Reports\",\n        description: \"Report bugs and technical issues\",\n        icon: \"ðŸ›\",\n        color: \"#ef4444\",\n        sort_order: 6,\n      },\n    ],\n    { onConflict: \"name\" },\n  )\n\n  if (catError) console.log(\"Forum categories already exist or error:\", catError.message)\n\n  // Insert spin wheel prizes\n  const { data: existingPrizes } = await supabase.from(\"spin_wheel_prizes\").select(\"id\").limit(1)\n\n  if (!existingPrizes || existingPrizes.length === 0) {\n    await supabase.from(\"spin_wheel_prizes\").insert([\n      { name: \"50 Coins\", type: \"coins\", value: 50, color: \"#fbbf24\", probability: 25.0, sort_order: 1 },\n      { name: \"100 Coins\", type: \"coins\", value: 100, color: \"#f59e0b\", probability: 20.0, sort_order: 2 },\n      { name: \"250 Coins\", type: \"coins\", value: 250, color: \"#3b82f6\", probability: 15.0, sort_order: 3 },\n      { name: \"500 Coins\", type: \"coins\", value: 500, color: \"#8b5cf6\", probability: 10.0, sort_order: 4 },\n      { name: \"1000 Coins\", type: \"coins\", value: 1000, color: \"#10b981\", probability: 5.0, sort_order: 5 },\n      { name: \"Better Luck\", type: \"custom\", value: 0, color: \"#6b7280\", probability: 25.0, sort_order: 6 },\n    ])\n  }\n\n  // Insert spin wheel settings\n  const { data: existingSettings } = await supabase.from(\"spin_wheel_settings\").select(\"id\").limit(1)\n\n  if (!existingSettings || existingSettings.length === 0) {\n    await supabase.from(\"spin_wheel_settings\").insert({\n      spins_per_day: 1,\n      is_enabled: true,\n    })\n  }\n\n  console.log(\"âœ… Seed data inserted\")\n}\n\nexport async function GET() {\n  return NextResponse.json({\n    message: \"Use POST to run migrations\",\n  })\n}\n","import { AppRouteRouteModule } from \"next/dist/esm/server/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/esm/server/lib/patch-fetch\";\nimport { addRequestMeta, getRequestMeta } from \"next/dist/esm/server/request-meta\";\nimport { getTracer, SpanKind } from \"next/dist/esm/server/lib/trace/tracer\";\nimport { setReferenceManifestsSingleton } from \"next/dist/esm/server/app-render/encryption-utils\";\nimport { createServerModuleMap } from \"next/dist/esm/server/app-render/action-utils\";\nimport { normalizeAppPath } from \"next/dist/esm/shared/lib/router/utils/app-paths\";\nimport { NodeNextRequest, NodeNextResponse } from \"next/dist/esm/server/base-http/node\";\nimport { NextRequestAdapter, signalFromNodeResponse } from \"next/dist/esm/server/web/spec-extension/adapters/next-request\";\nimport { BaseServerSpan } from \"next/dist/esm/server/lib/trace/constants\";\nimport { getRevalidateReason } from \"next/dist/esm/server/instrumentation/utils\";\nimport { sendResponse } from \"next/dist/esm/server/send-response\";\nimport { fromNodeOutgoingHttpHeaders, toNodeOutgoingHttpHeaders } from \"next/dist/esm/server/web/utils\";\nimport { getCacheControlHeader } from \"next/dist/esm/server/lib/cache-control\";\nimport { INFINITE_CACHE, NEXT_CACHE_TAGS_HEADER } from \"next/dist/esm/lib/constants\";\nimport { NoFallbackError } from \"next/dist/esm/shared/lib/no-fallback-error.external\";\nimport { CachedRouteKind } from \"next/dist/esm/server/response-cache\";\nimport * as userland from \"INNER_APP_ROUTE\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/database/migrate/route\",\n        pathname: \"/api/database/migrate\",\n        filename: \"route\",\n        bundlePath: \"\"\n    },\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n    resolvedPagePath: \"[project]/Pictures/APPLICATION DECRYPT FULL NO FXAP/TOOLS WEBSITE/app/api/database/migrate/route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return _patchFetch({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\nexport { routeModule, workAsyncStorage, workUnitAsyncStorage, serverHooks, patchFetch,  };\nexport async function handler(req, res, ctx) {\n    if (routeModule.isDev) {\n        addRequestMeta(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint());\n    }\n    let srcPage = \"/api/database/migrate/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (process.env.TURBOPACK) {\n        srcPage = srcPage.replace(/\\/index$/, '') || '/';\n    } else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = process.env.__NEXT_MULTI_ZONE_DRAFT_MODE;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, parsedUrl, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname, clientReferenceManifest, serverActionsManifest } = prepareResult;\n    const normalizedSrcPage = normalizeAppPath(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    const render404 = async ()=>{\n        // TODO: should route-module itself handle rendering the 404\n        if (routerServerContext == null ? void 0 : routerServerContext.render404) {\n            await routerServerContext.render404(req, res, parsedUrl, false);\n        } else {\n            res.end('This page could not be found');\n        }\n        return null;\n    };\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                if (nextConfig.experimental.adapterPath) {\n                    return await render404();\n                }\n                throw new NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isStaticGeneration = isIsr && !supportsDynamicResponse;\n    // Before rendering (which initializes component tree modules), we have to\n    // set the reference manifests to our global store so Server Action's\n    // encryption util can access to them at the top level of the page module.\n    if (serverActionsManifest && clientReferenceManifest) {\n        setReferenceManifestsSingleton({\n            page: srcPage,\n            clientReferenceManifest,\n            serverActionsManifest,\n            serverModuleMap: createServerModuleMap({\n                serverActionsManifest\n            })\n        });\n    }\n    const method = req.method || 'GET';\n    const tracer = getTracer();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            cacheComponents: Boolean(nextConfig.cacheComponents),\n            supportsDynamicResponse,\n            incrementalCache: getRequestMeta(req, 'incrementalCache'),\n            cacheLifeProfiles: nextConfig.cacheLife,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new NodeNextRequest(req);\n    const nodeNextRes = new NodeNextResponse(res);\n    const nextReq = NextRequestAdapter.fromNodeNextRequest(nodeNextReq, signalFromNodeResponse(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${srcPage}`);\n                }\n            });\n        };\n        const isMinimalMode = Boolean(process.env.MINIMAL_MODE || getRequestMeta(req, 'minimalMode'));\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!isMinimalMode && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = toNodeOutgoingHttpHeaders(response.headers);\n                        if (cacheTags) {\n                            headers[NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await sendResponse(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: getRevalidateReason({\n                                isStaticGeneration,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil,\n                isMinimalMode\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!isMinimalMode) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = fromNodeOutgoingHttpHeaders(cacheEntry.value.headers);\n            if (!(isMinimalMode && isIsr)) {\n                headers.delete(NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', getCacheControlHeader(cacheEntry.cacheControl));\n            }\n            await sendResponse(nodeNextReq, nodeNextRes, // @ts-expect-error - Argument of type 'Buffer<ArrayBufferLike>' is not assignable to parameter of type 'BodyInit | null | undefined'.\n            new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${srcPage}`,\n                    kind: SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: getRevalidateReason({\n                    isStaticGeneration,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await sendResponse(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n"],"names":[],"mappings":"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","ignoreList":[1]}