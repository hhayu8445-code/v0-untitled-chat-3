module.exports=[20183,a=>{"use strict";var b=a.i(83865),c=a.i(16482),d=a.i(25924),e=a.i(19731),f=a.i(49339),g=a.i(36087),h=a.i(86808);let i=0,j=new Map,k=a=>{if(j.has(a))return;let b=setTimeout(()=>{j.delete(a),n({type:"REMOVE_TOAST",toastId:a})},1e6);j.set(a,b)},l=[],m={toasts:[]};function n(a){m=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?k(c):a.toasts.forEach(a=>{k(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(m,a),l.forEach(a=>{a(m)})}function o({...a}){let b=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),c=()=>n({type:"DISMISS_TOAST",toastId:b});return n({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||c()}}}),{id:b,dismiss:c,update:a=>n({type:"UPDATE_TOAST",toast:{...a,id:b}})}}var p=a.i(8164),q=a.i(37754),r=a.i(57391),s=a.i(88770),t=a.i(67333),u=a.i(4846),v=a.i(91933),w=a.i(19022),x=a.i(7374);let y=(0,x.default)("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);var z=a.i(4911),A=a.i(53915);let B=(0,x.default)("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);var C=a.i(11971);let D=(0,x.default)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);var E=a.i(81813),F=a.i(78345),G=a.i(67383),H=a.i(87051),I=a.i(83589),J=a.i(32784),K=a.i(79574),L=a.i(21276),M=a.i(32055),N=a.i(23973),O=a.i(13065);function P(){let a=(0,O.useParams)(),i=(0,O.useRouter)(),{data:j}=(0,h.useSession)(),{toast:k}=function(){let[a,b]=c.useState(m);return c.useEffect(()=>(l.push(b),()=>{let a=l.indexOf(b);a>-1&&l.splice(a,1)}),[a]),{...a,toast:o,dismiss:a=>n({type:"DISMISS_TOAST",toastId:a})}}(),[x,P]=(0,c.useState)(null),[Q,R]=(0,c.useState)(!0),[S,T]=(0,c.useState)(""),[U,V]=(0,c.useState)(!1),[W,X]=(0,c.useState)(!1),[Y,Z]=(0,c.useState)(0);(0,c.useEffect)(()=>{let b=async()=>{try{let b=await fetch(`/api/forum/threads/${a.id}`);if(!b.ok)return void i.push("/forum");let c=await b.json();P(c)}catch(a){console.error("Error fetching thread:",a),i.push("/forum")}finally{R(!1)}};a.id&&b()},[a.id,i]);let $=async()=>{if(!j)return void k({title:"Login Required",description:"Please login to post a reply",variant:"destructive"});if(!S.trim())return void k({title:"Error",description:"Please enter a reply",variant:"destructive"});V(!0);try{let b=await fetch(`/api/forum/threads/${a.id}/replies`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:S})});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to post reply")}let c=await b.json();P(a=>a?{...a,replies:[...a.replies,c],repliesCount:a.repliesCount+1}:null),T(""),k({title:"Success",description:"Reply posted successfully!"})}catch(a){k({title:"Error",description:a instanceof Error?a.message:"Failed to post reply",variant:"destructive"})}finally{V(!1)}},_=()=>{X(!1)};return Q?(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(d.Sidebar,{}),(0,b.jsxs)("main",{className:"md:ml-72 transition-all duration-300",children:[(0,b.jsx)(e.Header,{}),(0,b.jsx)("div",{className:"p-6 flex items-center justify-center min-h-[60vh]",children:(0,b.jsx)(J.Loader2,{className:"h-8 w-8 animate-spin text-primary"})})]})]}):x?(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(d.Sidebar,{}),(0,b.jsxs)("main",{className:"md:ml-72 transition-all duration-300",children:[(0,b.jsx)(e.Header,{}),(0,b.jsxs)("div",{className:"p-6 max-w-5xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-6",children:[(0,b.jsxs)(N.default,{href:"/forum",className:"hover:text-foreground transition-colors flex items-center gap-1",children:[(0,b.jsx)(p.ArrowLeft,{className:"h-4 w-4"}),"Forum"]}),(0,b.jsx)("span",{children:"/"}),(0,b.jsx)(N.default,{href:`/forum/category/${x.categoryId}`,className:"hover:text-foreground transition-colors",children:x.category}),(0,b.jsx)("span",{children:"/"}),(0,b.jsx)("span",{className:"text-foreground truncate max-w-[200px]",children:x.title})]}),(0,b.jsxs)("div",{className:"glass rounded-2xl overflow-hidden mb-6",children:[(0,b.jsxs)("div",{className:"bg-secondary/30 px-6 py-3 flex items-center justify-between border-b border-border/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[x.isPinned&&(0,b.jsxs)(g.Badge,{className:"bg-primary/20 text-primary border-primary/30 gap-1",children:[(0,b.jsx)(u.Pin,{className:"h-3 w-3"}),"Pinned"]}),x.isLocked&&(0,b.jsxs)(g.Badge,{className:"bg-destructive/20 text-destructive border-destructive/30 gap-1",children:[(0,b.jsx)(v.Lock,{className:"h-3 w-3"}),"Locked"]}),(0,b.jsx)(g.Badge,{variant:"outline",className:"border-border/50",children:x.category})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",className:"h-8 gap-1.5 text-muted-foreground hover:text-foreground",children:[(0,b.jsx)(D,{className:"h-4 w-4"}),"Save"]}),(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",className:"h-8 gap-1.5 text-muted-foreground hover:text-foreground",children:[(0,b.jsx)(s.Share2,{className:"h-4 w-4"}),"Share"]}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-foreground",children:(0,b.jsx)(C.MoreHorizontal,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-6",children:x.title}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"shrink-0",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("img",{src:x.author?.avatar||"/placeholder.svg?height=56&width=56&query=user avatar",alt:x.author?.username||"User",className:"h-14 w-14 rounded-xl object-cover ring-2 ring-border"}),(0,b.jsx)("div",{className:"absolute -bottom-1 -right-1 h-4 w-4 rounded-full status-online border-2 border-card"})]})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("span",{className:"font-semibold text-foreground",children:x.author?.username||"Unknown User"}),x.author?.membership==="vip"&&(0,b.jsxs)(g.Badge,{className:"bg-primary/20 text-primary text-[10px] px-1.5 py-0",children:[(0,b.jsx)(z.Crown,{className:"h-3 w-3 mr-0.5"}),"VIP"]}),x.author?.membership==="admin"&&(0,b.jsxs)(g.Badge,{className:"bg-destructive/20 text-destructive text-[10px] px-1.5 py-0",children:[(0,b.jsx)(A.Shield,{className:"h-3 w-3 mr-0.5"}),"Admin"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(E.Clock,{className:"h-3 w-3"}),new Date(x.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),x.author?.reputation&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"h-1 w-1 rounded-full bg-muted-foreground"}),(0,b.jsxs)("span",{children:[x.author.reputation.toLocaleString()," reputation"]})]})]})]})]}),(0,b.jsxs)("div",{className:"mt-6 pl-[72px]",children:[(0,b.jsx)("div",{className:"prose prose-invert max-w-none",children:(0,b.jsx)("p",{className:"text-foreground leading-relaxed whitespace-pre-wrap text-[15px]",children:x.content})}),x.images&&x.images.length>0&&(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("div",{className:`grid gap-3 ${1===x.images.length?"grid-cols-1":2===x.images.length?"grid-cols-2":3===x.images.length?"grid-cols-3":"grid-cols-2 sm:grid-cols-3 md:grid-cols-4"}`,children:x.images.map((a,c)=>(0,b.jsxs)("button",{onClick:()=>{Z(c),X(!0)},className:"relative aspect-video rounded-xl overflow-hidden bg-secondary/50 group cursor-pointer",children:[(0,b.jsx)("img",{src:a||"/placeholder.svg",alt:`Image ${c+1}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-background/0 group-hover:bg-background/20 transition-colors"})]},c))}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:[x.images.length," image",x.images.length>1?"s":""," - Click to view"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-border/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",className:"h-9 gap-1.5 rounded-full bg-secondary/50 hover:bg-secondary",children:[(0,b.jsx)(w.ThumbsUp,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"font-medium",children:x.likes})]}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",className:"h-9 gap-1.5 rounded-full hover:bg-secondary",children:(0,b.jsx)(y,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(q.MessageSquare,{className:"h-4 w-4"}),x.repliesCount," replies"]}),(0,b.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(r.Eye,{className:"h-4 w-4"}),x.views.toLocaleString()," views"]})]})]})]})]})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[(0,b.jsx)(q.MessageSquare,{className:"h-5 w-5 text-primary"}),"Replies (",x.replies.length,")"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",className:"text-muted-foreground",children:"Oldest"}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",className:"text-primary",children:"Newest"})]})]}),(0,b.jsx)("div",{className:"space-y-4",children:x.replies.length>0?x.replies.map(a=>(0,b.jsx)("div",{className:"glass rounded-2xl p-5",children:(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"shrink-0",children:(0,b.jsx)("img",{src:a.author?.avatar||"/placeholder.svg?height=44&width=44&query=user avatar",alt:a.author?.username||"User",className:"h-11 w-11 rounded-xl object-cover"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-semibold text-foreground",children:a.author?.username||"Unknown"}),a.author?.membership==="vip"&&(0,b.jsx)(g.Badge,{className:"bg-primary/20 text-primary text-[10px] px-1.5 py-0",children:"VIP"}),a.author?.membership==="admin"&&(0,b.jsx)(g.Badge,{className:"bg-destructive/20 text-destructive text-[10px] px-1.5 py-0",children:"Admin"}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(a.createdAt).toLocaleDateString()}),a.isEdited&&(0,b.jsx)("span",{className:"text-[10px] text-muted-foreground",children:"(edited)"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-foreground",children:(0,b.jsx)(t.Flag,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-foreground",children:(0,b.jsx)(C.MoreHorizontal,{className:"h-4 w-4"})})]})]}),(0,b.jsx)("p",{className:"text-foreground text-[15px] leading-relaxed mb-4",children:a.content}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",className:"h-8 gap-1.5 rounded-full text-muted-foreground hover:text-foreground",children:[(0,b.jsx)(w.ThumbsUp,{className:"h-3.5 w-3.5"}),a.likes]}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",className:"h-8 gap-1.5 rounded-full text-muted-foreground hover:text-foreground",children:(0,b.jsx)(y,{className:"h-3.5 w-3.5"})}),(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",className:"h-8 gap-1.5 rounded-full text-muted-foreground hover:text-primary",children:[(0,b.jsx)(B,{className:"h-3.5 w-3.5"}),"Reply"]})]})]})]})},a.id)):(0,b.jsxs)("div",{className:"glass rounded-2xl p-8 text-center",children:[(0,b.jsx)(q.MessageSquare,{className:"h-10 w-10 text-muted-foreground mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No replies yet. Be the first to reply!"})]})})]}),x.isLocked?(0,b.jsxs)("div",{className:"glass rounded-2xl p-8 text-center",children:[(0,b.jsx)(v.Lock,{className:"h-10 w-10 text-muted-foreground mx-auto mb-3"}),(0,b.jsx)("h3",{className:"font-semibold text-foreground mb-1",children:"Thread Locked"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"This thread has been locked and cannot receive new replies."})]}):(0,b.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,b.jsxs)("h3",{className:"font-semibold text-foreground mb-4 flex items-center gap-2",children:[(0,b.jsx)(F.Send,{className:"h-5 w-5 text-primary"}),"Write a Reply"]}),j?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("textarea",{className:"w-full h-32 rounded-xl border border-border bg-secondary/30 p-4 text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-primary/50 focus:outline-none resize-none transition-all",placeholder:"Share your thoughts...",value:S,onChange:a=>T(a.target.value),disabled:U}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-lg text-muted-foreground hover:text-foreground",children:(0,b.jsx)(G.ImageIcon,{className:"h-5 w-5"})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-lg text-muted-foreground hover:text-foreground",children:(0,b.jsx)(H.Link2,{className:"h-5 w-5"})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-lg text-muted-foreground hover:text-foreground",children:(0,b.jsx)(I.AtSign,{className:"h-5 w-5"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(f.Button,{variant:"outline",className:"rounded-xl bg-transparent",onClick:()=>T(""),disabled:U,children:"Cancel"}),(0,b.jsxs)(f.Button,{className:"bg-primary hover:bg-primary/90 rounded-xl gap-2 glow-sm",onClick:$,disabled:U||!S.trim(),children:[U?(0,b.jsx)(J.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(F.Send,{className:"h-4 w-4"}),"Post Reply"]})]})]})]}):(0,b.jsxs)("div",{className:"text-center py-4",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"Please login to post a reply"}),(0,b.jsx)(N.default,{href:"/login",children:(0,b.jsx)(f.Button,{className:"bg-primary hover:bg-primary/90",children:"Login to Reply"})})]})]})]})]}),W&&x.images&&x.images.length>0&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 bg-background/95 flex items-center justify-center",onClick:_,children:[(0,b.jsx)("button",{onClick:_,className:"absolute top-4 right-4 h-10 w-10 rounded-full bg-secondary/80 flex items-center justify-center hover:bg-secondary transition-colors z-10",children:(0,b.jsx)(K.X,{className:"h-5 w-5"})}),x.images.length>1&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),x?.images&&Z(a=>(a-1+x.images.length)%x.images.length)},className:"absolute left-4 top-1/2 -translate-y-1/2 h-12 w-12 rounded-full bg-secondary/80 flex items-center justify-center hover:bg-secondary transition-colors z-10",children:(0,b.jsx)(L.ChevronLeft,{className:"h-6 w-6"})}),(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),x?.images&&Z(a=>(a+1)%x.images.length)},className:"absolute right-4 top-1/2 -translate-y-1/2 h-12 w-12 rounded-full bg-secondary/80 flex items-center justify-center hover:bg-secondary transition-colors z-10",children:(0,b.jsx)(M.ChevronRight,{className:"h-6 w-6"})})]}),(0,b.jsx)("div",{className:"max-w-[90vw] max-h-[90vh] flex items-center justify-center",onClick:a=>a.stopPropagation(),children:(0,b.jsx)("img",{src:x.images[Y]||"/placeholder.svg",alt:`Image ${Y+1}`,className:"max-w-full max-h-[85vh] object-contain rounded-lg"})}),x.images.length>1&&(0,b.jsxs)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-secondary/80 px-4 py-2 rounded-full text-sm",children:[Y+1," / ",x.images.length]})]})]}):null}a.s(["default",()=>P],20183)}];

//# sourceMappingURL=706fe_ATION%20DECRYPT%20FULL%20NO%20FXAP_TOOLS%20WEBSITE_app_forum_thread_%5Bid%5D_page_tsx_57615106._.js.map