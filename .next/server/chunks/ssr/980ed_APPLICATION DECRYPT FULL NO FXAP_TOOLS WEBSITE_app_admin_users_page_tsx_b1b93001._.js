module.exports=[31352,a=>{"use strict";var b=a.i(83865),c=a.i(25924),d=a.i(19731),e=a.i(49339),f=a.i(36087),g=a.i(38626),h=a.i(8164),i=a.i(60111),j=a.i(49948),k=a.i(67817),l=a.i(10031),m=a.i(62553),n=a.i(4911),o=a.i(97099),p=a.i(37754),q=a.i(23973),r=a.i(16482),s=a.i(13065),t=a.i(50969),u=a.i(85989),v=a.i(96389),w=a.i(94368),x=a.i(8340),y=a.i(17791),z=a.i(46465),A="AlertDialog",[B,C]=(0,v.createContextScope)(A,[x.createDialogScope]),D=(0,x.createDialogScope)(),E=a=>{let{__scopeAlertDialog:c,...d}=a,e=D(c);return(0,b.jsx)(x.Root,{...e,...d,modal:!0})};E.displayName=A;var F=r.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=D(d);return(0,b.jsx)(x.Trigger,{...f,...e,ref:c})});F.displayName="AlertDialogTrigger";var G=a=>{let{__scopeAlertDialog:c,...d}=a,e=D(c);return(0,b.jsx)(x.Portal,{...e,...d})};G.displayName="AlertDialogPortal";var H=r.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=D(d);return(0,b.jsx)(x.Overlay,{...f,...e,ref:c})});H.displayName="AlertDialogOverlay";var I="AlertDialogContent",[J,K]=B(I),L=r.forwardRef((a,c)=>{let{__scopeAlertDialog:d,children:e,...f}=a,g=D(d),h=r.useRef(null),i=(0,w.useComposedRefs)(c,h),j=r.useRef(null);return(0,b.jsx)(x.WarningProvider,{contentName:I,titleName:M,docsSlug:"alert-dialog",children:(0,b.jsx)(J,{scope:d,cancelRef:j,children:(0,b.jsxs)(x.Content,{role:"alertdialog",...g,...f,ref:i,onOpenAutoFocus:(0,y.composeEventHandlers)(f.onOpenAutoFocus,a=>{a.preventDefault(),j.current?.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[(0,b.jsx)(z.Slottable,{children:e}),(0,b.jsx)(T,{contentRef:h})]})})})});L.displayName=I;var M="AlertDialogTitle",N=r.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=D(d);return(0,b.jsx)(x.Title,{...f,...e,ref:c})});N.displayName=M;var O="AlertDialogDescription",P=r.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=D(d);return(0,b.jsx)(x.Description,{...f,...e,ref:c})});P.displayName=O;var Q=r.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=D(d);return(0,b.jsx)(x.Close,{...f,...e,ref:c})});Q.displayName="AlertDialogAction";var R="AlertDialogCancel",S=r.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,{cancelRef:f}=K(R,d),g=D(d),h=(0,w.useComposedRefs)(c,f);return(0,b.jsx)(x.Close,{...g,...e,ref:h})});S.displayName=R;var T=({contentRef:a})=>{let b=`\`${I}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${I}\` by passing a \`${O}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${I}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return r.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(b)},[b,a]),null},U=a.i(8324);function V({...a}){return(0,b.jsx)(E,{"data-slot":"alert-dialog",...a})}function W({...a}){return(0,b.jsx)(F,{"data-slot":"alert-dialog-trigger",...a})}function X({...a}){return(0,b.jsx)(G,{"data-slot":"alert-dialog-portal",...a})}function Y({className:a,...c}){return(0,b.jsx)(H,{"data-slot":"alert-dialog-overlay",className:(0,U.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...c})}function Z({className:a,...c}){return(0,b.jsxs)(X,{children:[(0,b.jsx)(Y,{}),(0,b.jsx)(L,{"data-slot":"alert-dialog-content",className:(0,U.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...c})]})}function $({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,U.cn)("flex flex-col gap-2 text-center sm:text-left",a),...c})}function _({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,U.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...c})}function aa({className:a,...c}){return(0,b.jsx)(N,{"data-slot":"alert-dialog-title",className:(0,U.cn)("text-lg font-semibold",a),...c})}function ab({className:a,...c}){return(0,b.jsx)(P,{"data-slot":"alert-dialog-description",className:(0,U.cn)("text-muted-foreground text-sm",a),...c})}function ac({className:a,...c}){return(0,b.jsx)(Q,{className:(0,U.cn)((0,e.buttonVariants)(),a),...c})}function ad({className:a,...c}){return(0,b.jsx)(S,{className:(0,U.cn)((0,e.buttonVariants)({variant:"outline"}),a),...c})}var ae=(a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}},af=r.createContext(void 0),ag={setTheme:a=>{},themes:[]};r.memo(({forcedTheme:a,storageKey:b,attribute:c,enableSystem:d,enableColorScheme:e,defaultTheme:f,value:g,themes:h,nonce:i,scriptProps:j})=>{let k=JSON.stringify([c,b,f,a,h,g,d,e]).slice(1,-1);return r.createElement("script",{...j,suppressHydrationWarning:!0,nonce:i,dangerouslySetInnerHTML:{__html:`(${ae.toString()})(${k})`}})});var ah=a.i(22528);let ai=({...a})=>{var c;let{theme:d="system"}=null!=(c=r.useContext(af))?c:ag;return(0,b.jsx)(ah.Toaster,{theme:d,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...a})};var aj=a.i(14585);function ak(){let{isAdmin:a,isLoading:v}=(0,t.useAuth)(),w=(0,s.useRouter)(),[x,y]=(0,r.useState)([]),[z,A]=(0,r.useState)(!0),[B,C]=(0,r.useState)("");return((0,r.useEffect)(()=>{v||a||w.push("/")},[a,v,w]),(0,r.useEffect)(()=>{async function b(){try{let a=await fetch("/api/admin/users");if(a.ok){let b=await a.json();y(b.users||[])}}finally{A(!1)}}a&&b()},[a]),v)?(0,b.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,b.jsx)("div",{className:"h-12 w-12 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):a?(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(c.Sidebar,{}),(0,b.jsxs)("main",{className:"md:ml-72 transition-all duration-300",children:[(0,b.jsx)(d.Header,{}),(0,b.jsx)(ai,{richColors:!0,closeButton:!0}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)(q.default,{href:"/admin",className:"inline-flex items-center gap-2 text-muted-foreground hover:text-foreground mb-6",children:[(0,b.jsx)(h.ArrowLeft,{className:"h-4 w-4"}),"Back to Admin"]}),(0,b.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"User Management"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage user accounts, memberships, and permissions."})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(i.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(g.Input,{placeholder:"Search users...",className:"pl-9 bg-secondary/50",value:B,onChange:a=>C(a.target.value)})]}),(0,b.jsxs)(e.Button,{variant:"outline",className:"gap-2 bg-transparent",children:[(0,b.jsx)(j.Filter,{className:"h-4 w-4"}),"Filter"]}),(0,b.jsxs)("div",{className:"flex gap-1 bg-secondary rounded-lg p-1 ml-auto",children:[(0,b.jsx)(e.Button,{variant:"secondary",size:"sm",className:"bg-card",children:"All"}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",children:"VIP"}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",children:"Free"}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",children:"Banned"})]})]}),(0,b.jsx)("div",{className:"rounded-xl border border-border bg-card overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border bg-secondary/30",children:[(0,b.jsx)("th",{className:"text-left py-4 px-4 text-sm font-medium text-muted-foreground",children:"User"}),(0,b.jsx)("th",{className:"text-left py-4 px-4 text-sm font-medium text-muted-foreground",children:"Membership"}),(0,b.jsx)("th",{className:"text-left py-4 px-4 text-sm font-medium text-muted-foreground",children:"Stats"}),(0,b.jsx)("th",{className:"text-left py-4 px-4 text-sm font-medium text-muted-foreground",children:"Status"}),(0,b.jsx)("th",{className:"text-left py-4 px-4 text-sm font-medium text-muted-foreground",children:"Joined"}),(0,b.jsx)("th",{className:"text-left py-4 px-4 text-sm font-medium text-muted-foreground",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:(z?[]:x.filter(a=>a.username.toLowerCase().includes(B.toLowerCase()))).map(a=>(0,b.jsxs)("tr",{className:"border-b border-border last:border-0 hover:bg-secondary/20",children:[(0,b.jsx)("td",{className:"py-4 px-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("img",{src:a.avatar||"/placeholder.svg",alt:a.username,className:"h-10 w-10 rounded-full object-cover"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:a.username}),"vip"===a.membership&&(0,b.jsx)(n.Crown,{className:"h-4 w-4 text-primary"})]}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:a.email})]})]})}),(0,b.jsxs)("td",{className:"py-4 px-4",children:[(0,b.jsx)(f.Badge,{className:"vip"===a.membership?"bg-primary/20 text-primary":"bg-secondary text-muted-foreground",children:a.membership.toUpperCase()}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsxs)(u.Select,{value:a.membership,onValueChange:async b=>{let c=(0,aj.getCSRFToken)();await fetch(`/api/admin/users/${a.discordId}`,{method:"POST",headers:{"Content-Type":"application/json",...c?{"x-csrf-token":c}:{}},body:JSON.stringify({action:"setMembership",membership:b})}),y(x.map(c=>c.discordId===a.discordId?{...c,membership:b}:c)),ah.toast.success(`Membership updated to ${b.toUpperCase()} for ${a.username}`)},children:[(0,b.jsx)(u.SelectTrigger,{size:"sm",className:"bg-secondary/50",children:(0,b.jsx)(u.SelectValue,{placeholder:"Membership"})}),(0,b.jsxs)(u.SelectContent,{children:[(0,b.jsx)(u.SelectItem,{value:"free",children:"Free"}),(0,b.jsx)(u.SelectItem,{value:"vip",children:"VIP"}),(0,b.jsx)(u.SelectItem,{value:"admin",children:"Admin"})]})]})})]}),(0,b.jsx)("td",{className:"py-4 px-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(o.Download,{className:"h-4 w-4"}),a.downloads]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(p.MessageSquare,{className:"h-4 w-4"}),a.posts]})]})}),(0,b.jsx)("td",{className:"py-4 px-4",children:(0,b.jsx)(f.Badge,{className:a.isBanned?"bg-destructive/20 text-destructive":"bg-success/20 text-success",children:a.isBanned?"banned":"active"})}),(0,b.jsx)("td",{className:"py-4 px-4 text-muted-foreground",children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsx)("td",{className:"py-4 px-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:async()=>{await fetch(`/api/admin/users/${a.discordId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"setMembership",membership:"vip"})}),y(x.map(b=>b.discordId===a.discordId?{...b,membership:"vip"}:b))},children:(0,b.jsx)(k.Edit,{className:"h-4 w-4"})}),(0,b.jsxs)(V,{children:[(0,b.jsx)(W,{asChild:!0,children:(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,b.jsx)(m.Ban,{className:"h-4 w-4"})})}),(0,b.jsxs)(Z,{children:[(0,b.jsxs)($,{children:[(0,b.jsx)(aa,{children:a.isBanned?"Unban User":"Ban User"}),(0,b.jsx)(ab,{children:a.isBanned?`Allow ${a.username} to access the platform again?`:`Block ${a.username} from accessing the platform? You can undo later.`})]}),(0,b.jsxs)(_,{children:[(0,b.jsx)(ad,{children:"Cancel"}),(0,b.jsx)(ac,{onClick:async()=>{let b=!a.isBanned,c=(0,aj.getCSRFToken)(),d=await fetch(`/api/admin/users/${a.discordId}`,{method:"POST",headers:{"Content-Type":"application/json",...c?{"x-csrf-token":c}:{}},body:JSON.stringify({action:"ban",ban:b})}),e=await d.json();d.ok?(y(x.map(c=>c.discordId===a.discordId?{...c,isBanned:b,status:e.status}:c)),ah.toast.success(`${b?"User banned":"User unbanned"}: ${a.username}`)):ah.toast.error(e.error||"Failed to update ban status")},children:a.isBanned?"Unban":"Ban"})]})]})]}),(0,b.jsxs)(V,{children:[(0,b.jsx)(W,{asChild:!0,children:(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",children:(0,b.jsx)(l.Trash2,{className:"h-4 w-4"})})}),(0,b.jsxs)(Z,{children:[(0,b.jsxs)($,{children:[(0,b.jsx)(aa,{children:"Delete User"}),(0,b.jsxs)(ab,{children:["Are you sure you want to permanently delete ",(0,b.jsx)("strong",{children:a.username}),"? This action cannot be undone."]})]}),(0,b.jsxs)(_,{children:[(0,b.jsx)(ad,{children:"Cancel"}),(0,b.jsx)(ac,{onClick:async()=>{let b=(0,aj.getCSRFToken)(),c=await fetch(`/api/admin/users/${a.discordId}`,{method:"DELETE",headers:b?{"x-csrf-token":b}:{}});if(c.ok)y(x.filter(b=>b.discordId!==a.discordId)),ah.toast.success(`User deleted: ${a.username}`);else{let a=await c.json();ah.toast.error(a.error||"Failed to delete user")}},children:"Delete"})]})]})]})]})})]},a.id))})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Showing 1-6 of 30 users"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",size:"sm",disabled:!0,children:"Previous"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",children:"Next"})]})]})]})]})]}):null}a.s(["default",()=>ak],31352)}];

//# sourceMappingURL=980ed_APPLICATION%20DECRYPT%20FULL%20NO%20FXAP_TOOLS%20WEBSITE_app_admin_users_page_tsx_b1b93001._.js.map