module.exports=[89140,a=>{"use strict";var b=a.i(83865),c=a.i(16482),d=a.i(13065),e=a.i(50969),f=a.i(49339),g=a.i(38626),h=a.i(72607),i=a.i(50089),j=a.i(5838),k=a.i(85989),l=a.i(36087),m=a.i(747),n=a.i(22528),o=a.i(38389),p=a.i(79574),q=a.i(67383),r=a.i(51613),s=a.i(31500),t=a.i(87051),u=a.i(8164),v=a.i(32784),w=a.i(57391),x=a.i(75017),y=a.i(23973),z=a.i(20944);let A=[{value:"scripts",label:"Scripts"},{value:"mlo",label:"MLO/Maps"},{value:"vehicles",label:"Vehicles"},{value:"eup",label:"EUP/Clothing"},{value:"weapons",label:"Weapons"},{value:"sounds",label:"Sounds"},{value:"tools",label:"Tools"}],B=[{value:"standalone",label:"Standalone"},{value:"esx",label:"ESX"},{value:"qbcore",label:"QBCore"},{value:"qbox",label:"QBox"},{value:"vrp",label:"vRP"}];function C({params:a}){let C=(0,c.use)(a),D=(0,d.useRouter)(),{user:E}=(0,e.useAuth)(),[F,G]=(0,c.useState)(!0),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)({title:"",description:"",features:"",installation:"",changelog:"",category:"scripts",framework:"standalone",version:"1.0.0",coinPrice:0,tags:[],thumbnail:"",downloadLink:"",youtubeLink:"",githubLink:"",docsLink:""}),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)("description");(0,c.useEffect)(()=>{let a=async()=>{try{let a=await fetch(`/api/assets/${C.id}`);if(!a.ok)throw Error("Asset not found");let b=await a.json();if(b.author_id!==E?.discord_id){n.toast.error("You don't have permission to edit this asset"),D.push(`/asset/${C.id}`);return}K(b),M({title:b.title||"",description:b.description||"",features:b.features||"",installation:b.installation||"",changelog:b.changelog||"",category:b.category||"scripts",framework:b.framework||"standalone",version:b.version||"1.0.0",coinPrice:b.coin_price||0,tags:b.tags||[],thumbnail:b.thumbnail||"",downloadLink:b.download_link||"",youtubeLink:b.youtube_link||"",githubLink:b.github_link||"",docsLink:b.docs_link||""})}catch(a){n.toast.error("Failed to load asset"),D.push("/dashboard")}finally{G(!1)}};E&&a()},[C.id,E,D]);let R=a=>{let b=({description:z.formatDescription,features:z.formatFeatures,installation:z.formatInstallation,changelog:z.formatChangelog})[a](L[a]);M(c=>({...c,[a]:b})),n.toast.success(`${a.charAt(0).toUpperCase()+a.slice(1)} formatted!`)},S=()=>{N.trim()&&!L.tags.includes(N.trim())&&L.tags.length<10&&(M(a=>({...a,tags:[...a.tags,N.trim()]})),O(""))},T=async a=>{a.preventDefault(),I(!0);try{let a=await fetch(`/api/assets/${C.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:L.title,description:L.description,features:L.features,installation:L.installation,changelog:L.changelog,category:L.category,framework:L.framework,version:L.version,coin_price:L.coinPrice,tags:L.tags,thumbnail:L.thumbnail,download_link:L.downloadLink,youtube_link:L.youtubeLink,github_link:L.githubLink,docs_link:L.docsLink})});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to update asset")}n.toast.success("Asset updated successfully!"),D.push(`/asset/${C.id}`)}catch(a){n.toast.error(a.message||"Failed to update asset")}finally{I(!1)}};return F?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)(v.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):(0,b.jsx)("div",{className:"min-h-screen bg-background py-8",children:(0,b.jsxs)("div",{className:"container max-w-6xl mx-auto px-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",asChild:!0,children:(0,b.jsx)(y.default,{href:`/asset/${C.id}`,children:(0,b.jsx)(u.ArrowLeft,{className:"h-5 w-5"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Edit Asset"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Update your asset details"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",asChild:!0,children:(0,b.jsxs)(y.default,{href:`/asset/${C.id}`,children:[(0,b.jsx)(w.Eye,{className:"h-4 w-4 mr-2"})," Preview"]})}),(0,b.jsxs)(f.Button,{onClick:T,disabled:H,children:[H?(0,b.jsx)(v.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,b.jsx)(o.Save,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}),(0,b.jsx)("form",{onSubmit:T,children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,b.jsxs)(j.Card,{children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsxs)(j.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(r.FileText,{className:"h-5 w-5 text-primary"}),"Basic Information"]})}),(0,b.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"title",children:"Title *"}),(0,b.jsx)(g.Input,{id:"title",value:L.title,onChange:a=>M(b=>({...b,title:a.target.value})),placeholder:"Asset title",required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Category"}),(0,b.jsxs)(k.Select,{value:L.category,onValueChange:a=>M(b=>({...b,category:a})),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsx)(k.SelectContent,{children:A.map(a=>(0,b.jsx)(k.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Framework"}),(0,b.jsxs)(k.Select,{value:L.framework,onValueChange:a=>M(b=>({...b,framework:a})),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsx)(k.SelectContent,{children:B.map(a=>(0,b.jsx)(k.SelectItem,{value:a.value,children:a.label},a.value))})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"version",children:"Version"}),(0,b.jsx)(g.Input,{id:"version",value:L.version,onChange:a=>M(b=>({...b,version:a.target.value})),placeholder:"1.0.0"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"coinPrice",children:"Price (Coins)"}),(0,b.jsx)(g.Input,{id:"coinPrice",type:"number",min:"0",value:L.coinPrice,onChange:a=>M(b=>({...b,coinPrice:Number.parseInt(a.target.value)||0}))})]})]})]})]}),(0,b.jsxs)(j.Card,{children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsxs)(j.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(r.FileText,{className:"h-5 w-5 text-primary"}),"Content"]}),(0,b.jsx)(j.CardDescription,{children:"Use markdown formatting. Click the magic wand to auto-format your text."})]}),(0,b.jsx)(j.CardContent,{children:(0,b.jsxs)(m.Tabs,{value:P,onValueChange:Q,children:[(0,b.jsxs)(m.TabsList,{className:"grid grid-cols-4 w-full",children:[(0,b.jsx)(m.TabsTrigger,{value:"description",children:"Description"}),(0,b.jsx)(m.TabsTrigger,{value:"features",children:"Features"}),(0,b.jsx)(m.TabsTrigger,{value:"installation",children:"Installation"}),(0,b.jsx)(m.TabsTrigger,{value:"changelog",children:"Changelog"})]}),(0,b.jsxs)(m.TabsContent,{value:"description",className:"space-y-2 mt-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(i.Label,{children:"Description *"}),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>R("description"),children:[(0,b.jsx)(x.Wand2,{className:"h-4 w-4 mr-2"})," Auto Format"]})]}),(0,b.jsx)(h.Textarea,{value:L.description,onChange:a=>M(b=>({...b,description:a.target.value})),placeholder:"Describe your asset in detail...",className:"min-h-[250px] font-mono text-sm"})]}),(0,b.jsxs)(m.TabsContent,{value:"features",className:"space-y-2 mt-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(i.Label,{children:"Features"}),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>R("features"),children:[(0,b.jsx)(x.Wand2,{className:"h-4 w-4 mr-2"})," Auto Format"]})]}),(0,b.jsx)(h.Textarea,{value:L.features,onChange:a=>M(b=>({...b,features:a.target.value})),placeholder:"List the features of your asset...",className:"min-h-[250px] font-mono text-sm"})]}),(0,b.jsxs)(m.TabsContent,{value:"installation",className:"space-y-2 mt-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(i.Label,{children:"Installation Guide"}),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>R("installation"),children:[(0,b.jsx)(x.Wand2,{className:"h-4 w-4 mr-2"})," Auto Format"]})]}),(0,b.jsx)(h.Textarea,{value:L.installation,onChange:a=>M(b=>({...b,installation:a.target.value})),placeholder:"Explain how to install your asset...",className:"min-h-[250px] font-mono text-sm"})]}),(0,b.jsxs)(m.TabsContent,{value:"changelog",className:"space-y-2 mt-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(i.Label,{children:"Changelog"}),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>R("changelog"),children:[(0,b.jsx)(x.Wand2,{className:"h-4 w-4 mr-2"})," Auto Format"]})]}),(0,b.jsx)(h.Textarea,{value:L.changelog,onChange:a=>M(b=>({...b,changelog:a.target.value})),placeholder:"Document version changes...",className:"min-h-[250px] font-mono text-sm"})]})]})})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(j.Card,{children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsxs)(j.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(q.ImageIcon,{className:"h-5 w-5 text-primary"}),"Thumbnail"]})}),(0,b.jsxs)(j.CardContent,{className:"space-y-4",children:[L.thumbnail&&(0,b.jsx)("div",{className:"aspect-video rounded-lg overflow-hidden bg-muted",children:(0,b.jsx)("img",{src:L.thumbnail||"/placeholder.svg",alt:"Thumbnail",className:"w-full h-full object-cover"})}),(0,b.jsx)(g.Input,{value:L.thumbnail,onChange:a=>M(b=>({...b,thumbnail:a.target.value})),placeholder:"Thumbnail URL"})]})]}),(0,b.jsxs)(j.Card,{children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsxs)(j.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(t.Link2,{className:"h-5 w-5 text-primary"}),"Links"]})}),(0,b.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Download Link *"}),(0,b.jsx)(g.Input,{value:L.downloadLink,onChange:a=>M(b=>({...b,downloadLink:a.target.value})),placeholder:"https://...",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"YouTube Video"}),(0,b.jsx)(g.Input,{value:L.youtubeLink,onChange:a=>M(b=>({...b,youtubeLink:a.target.value})),placeholder:"https://youtube.com/..."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"GitHub Repository"}),(0,b.jsx)(g.Input,{value:L.githubLink,onChange:a=>M(b=>({...b,githubLink:a.target.value})),placeholder:"https://github.com/..."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{children:"Documentation"}),(0,b.jsx)(g.Input,{value:L.docsLink,onChange:a=>M(b=>({...b,docsLink:a.target.value})),placeholder:"https://docs...."})]})]})]}),(0,b.jsxs)(j.Card,{children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsxs)(j.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Settings,{className:"h-5 w-5 text-primary"}),"Tags"]})}),(0,b.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Input,{value:N,onChange:a=>O(a.target.value),placeholder:"Add tag...",onKeyDown:a=>"Enter"===a.key&&(a.preventDefault(),S())}),(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:S,children:"Add"})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:L.tags.map(a=>(0,b.jsxs)(l.Badge,{variant:"secondary",className:"gap-1",children:[a,(0,b.jsx)("button",{type:"button",onClick:()=>{M(b=>({...b,tags:b.tags.filter(b=>b!==a)}))},className:"ml-1 hover:text-destructive",children:(0,b.jsx)(p.X,{className:"h-3 w-3"})})]},a))})]})]})]})]})})]})})}a.s(["default",()=>C])}];

//# sourceMappingURL=bb697_TOOLS%20WEBSITE_app_dashboard_edit-asset_%5Bid%5D_page_tsx_8cdfaf82._.js.map