{"version":3,"sources":["../../../../../../Pictures/APPLICATION%20DECRYPT%20FULL%20NO%20FXAP/TOOLS%20WEBSITE/lib/seo-rush.ts","../../../../../../Pictures/APPLICATION%20DECRYPT%20FULL%20NO%20FXAP/TOOLS%20WEBSITE/lib/auto-seo.ts"],"sourcesContent":["const SEO_RUSH_TOKEN = \"3101ad656913045c87a8ea83e1b19698\"\nconst SEO_RUSH_API = \"https://api.seorush.io/v1\"\n\ninterface SEOMetadata {\n  title: string\n  description: string\n  keywords: string[]\n  ogImage?: string\n  canonical?: string\n}\n\nexport async function generateSEOMetadata(content: string, url: string): Promise<SEOMetadata> {\n  try {\n    const response = await fetch(`${SEO_RUSH_API}/generate`, {\n      method: \"POST\",\n      headers: {\n        \"Authorization\": `Bearer ${SEO_RUSH_TOKEN}`,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        content,\n        url,\n        language: \"en\",\n        optimize: true,\n      }),\n    })\n\n    if (!response.ok) {\n      throw new Error(\"SEO generation failed\")\n    }\n\n    const data = await response.json()\n    return {\n      title: data.title || generateFallbackTitle(content),\n      description: data.description || generateFallbackDescription(content),\n      keywords: data.keywords || extractKeywords(content),\n      ogImage: data.ogImage,\n      canonical: url,\n    }\n  } catch (error) {\n    return generateFallbackSEO(content, url)\n  }\n}\n\nexport async function submitToSearchEngines(url: string): Promise<void> {\n  try {\n    await fetch(`${SEO_RUSH_API}/submit`, {\n      method: \"POST\",\n      headers: {\n        \"Authorization\": `Bearer ${SEO_RUSH_TOKEN}`,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        url,\n        engines: [\"google\", \"bing\", \"yandex\"],\n      }),\n    })\n  } catch (error) {\n    console.error(\"Search engine submission failed:\", error)\n  }\n}\n\nexport async function generateSitemap(urls: string[]): Promise<string> {\n  const sitemap = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\n${urls.map(url => `  <url>\n    <loc>${url}</loc>\n    <lastmod>${new Date().toISOString()}</lastmod>\n    <changefreq>daily</changefreq>\n    <priority>0.8</priority>\n  </url>`).join('\\n')}\n</urlset>`\n  \n  return sitemap\n}\n\nfunction generateFallbackTitle(content: string): string {\n  const words = content.split(' ').slice(0, 10).join(' ')\n  return words.length > 60 ? words.slice(0, 57) + '...' : words\n}\n\nfunction generateFallbackDescription(content: string): string {\n  const words = content.split(' ').slice(0, 30).join(' ')\n  return words.length > 160 ? words.slice(0, 157) + '...' : words\n}\n\nfunction extractKeywords(content: string): string[] {\n  const words = content.toLowerCase().split(/\\W+/)\n  const stopWords = ['the', 'a', 'an', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for']\n  const filtered = words.filter(w => w.length > 3 && !stopWords.includes(w))\n  const frequency: Record<string, number> = {}\n  \n  filtered.forEach(word => {\n    frequency[word] = (frequency[word] || 0) + 1\n  })\n  \n  return Object.entries(frequency)\n    .sort((a, b) => b[1] - a[1])\n    .slice(0, 10)\n    .map(([word]) => word)\n}\n\nfunction generateFallbackSEO(content: string, url: string): SEOMetadata {\n  return {\n    title: generateFallbackTitle(content),\n    description: generateFallbackDescription(content),\n    keywords: extractKeywords(content),\n    canonical: url,\n  }\n}\n\nexport async function optimizeForSEO(pageData: {\n  title: string\n  content: string\n  url: string\n}): Promise<SEOMetadata> {\n  const metadata = await generateSEOMetadata(pageData.content, pageData.url)\n  await submitToSearchEngines(pageData.url)\n  return metadata\n}\n","import { optimizeForSEO } from \"./seo-rush\"\nimport { getSupabaseAdminClient } from \"./supabase/server\"\n\nexport async function autoOptimizeAsset(assetId: string) {\n  try {\n    const supabase = await getSupabaseAdminClient()\n    const { data: asset } = await supabase.from(\"assets\").select(\"*\").eq(\"id\", assetId).single()\n\n    if (!asset || asset.seo_optimized) return\n\n    const seoData = await optimizeForSEO({\n      title: asset.title,\n      content: `${asset.title} ${asset.description} ${asset.features || ''}`,\n      url: `${process.env.NEXTAUTH_URL}/asset/${assetId}`,\n    })\n\n    await supabase\n      .from(\"assets\")\n      .update({\n        seo_title: seoData.title,\n        seo_description: seoData.description,\n        seo_keywords: seoData.keywords,\n        seo_optimized: true,\n        seo_optimized_at: new Date().toISOString(),\n      })\n      .eq(\"id\", assetId)\n  } catch (error) {\n    console.error(\"Auto SEO failed for asset:\", assetId)\n  }\n}\n\nexport async function autoOptimizeThread(threadId: string) {\n  try {\n    const supabase = await getSupabaseAdminClient()\n    const { data: thread } = await supabase.from(\"forum_threads\").select(\"*\").eq(\"id\", threadId).single()\n\n    if (!thread || thread.seo_optimized) return\n\n    const seoData = await optimizeForSEO({\n      title: thread.title,\n      content: `${thread.title} ${thread.content}`,\n      url: `${process.env.NEXTAUTH_URL}/forum/thread/${threadId}`,\n    })\n\n    await supabase\n      .from(\"forum_threads\")\n      .update({\n        seo_title: seoData.title,\n        seo_description: seoData.description,\n        seo_keywords: seoData.keywords,\n        seo_optimized: true,\n        seo_optimized_at: new Date().toISOString(),\n      })\n      .eq(\"id\", threadId)\n  } catch (error) {\n    console.error(\"Auto SEO failed for thread:\", threadId)\n  }\n}\n\nexport async function autoOptimizeAll() {\n  const supabase = await getSupabaseAdminClient()\n\n  const { data: assets } = await supabase\n    .from(\"assets\")\n    .select(\"id\")\n    .eq(\"status\", \"active\")\n    .eq(\"seo_optimized\", false)\n    .limit(1000)\n\n  if (assets) {\n    for (const asset of assets) {\n      await autoOptimizeAsset(asset.id)\n      await new Promise(resolve => setTimeout(resolve, 100))\n    }\n  }\n\n  const { data: threads } = await supabase\n    .from(\"forum_threads\")\n    .select(\"id\")\n    .eq(\"status\", \"approved\")\n    .eq(\"seo_optimized\", false)\n    .limit(1000)\n\n  if (threads) {\n    for (const thread of threads) {\n      await autoOptimizeThread(thread.id)\n      await new Promise(resolve => setTimeout(resolve, 100))\n    }\n  }\n}\n"],"names":[],"mappings":"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"}