(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42242,e=>{"use strict";let t=(0,e.i(11317).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],42242)},83106,e=>{"use strict";let t=(0,e.i(11317).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["default",()=>t])},52353,e=>{"use strict";var t=e.i(34355),s=e.i(97886),r=e.i(85866),a=e.i(49094);let i=(0,r.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:r,asChild:d=!1,...l}){let c=d?s.Slot:"span";return(0,t.jsx)(c,{"data-slot":"badge",className:(0,a.cn)(i({variant:r}),e),...l})}e.s(["Badge",()=>d])},70426,e=>{"use strict";var t=e.i(34355),s=e.i(49094);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function a({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...r})}function d({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...r})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>l,"CardDescription",()=>d,"CardHeader",()=>a,"CardTitle",()=>i])},6898,e=>{"use strict";let t=(0,e.i(11317).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],6898)},52368,e=>{"use strict";var t=e.i(83106);e.s(["Check",()=>t.default])},89247,e=>{"use strict";let t=(0,e.i(11317).default)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);e.s(["Database",()=>t],89247)},80817,e=>{"use strict";var t=e.i(34355),s=e.i(85866),r=e.i(49094);let a=(0,s.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i({className:e,variant:s,...i}){return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,r.cn)(a({variant:s}),e),...i})}function d({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,r.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...s})}e.s(["Alert",()=>i,"AlertDescription",()=>d])},83233,e=>{"use strict";var t=e.i(34355),s=e.i(84025),r=e.i(38589),a=e.i(70426),i=e.i(80817),d=e.i(42242),l=e.i(89247),c=e.i(52368),n=e.i(88924),o=e.i(6898),x=e.i(52353);function u(){let[e,u]=(0,s.useState)(!1),[m,g]=(0,s.useState)([]),[h,p]=(0,s.useState)(null),v=async()=>{u(!0),p(null),g([]);try{let e=await fetch("/api/database/migrate-old-data"),t=await e.json();if(!e.ok)throw Error(t.error||"Migration failed");g(t.results)}catch(e){p(e.message)}finally{u(!1)}},b=m.filter(e=>"success"===e.status).length,f=m.filter(e=>"error"===e.status).length,j=m.reduce((e,t)=>e+(t.migrated||0),0);return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:(0,t.jsx)("div",{className:"mx-auto max-w-4xl space-y-6",children:(0,t.jsxs)(a.Card,{className:"border-purple-500/20 bg-slate-900/50 backdrop-blur",children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(l.Database,{className:"h-8 w-8 text-purple-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(a.CardTitle,{className:"text-2xl text-white",children:"Database Migration"}),(0,t.jsx)(a.CardDescription,{className:"text-slate-400",children:"Migrate data from old Supabase database to new database"})]})]})}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsxs)(i.Alert,{className:"border-blue-500/20 bg-blue-500/10",children:[(0,t.jsx)(o.AlertCircle,{className:"h-4 w-4 text-blue-400"}),(0,t.jsxs)(i.AlertDescription,{className:"text-blue-300",children:["Make sure you have added"," ",(0,t.jsx)("code",{className:"rounded bg-blue-500/20 px-1 py-0.5",children:"OLD_SUPABASE_SERVICE_ROLE_KEY"})," to your environment variables"]})]}),(0,t.jsx)("div",{className:"flex gap-4",children:(0,t.jsx)(r.Button,{onClick:v,disabled:e,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Migrating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Database,{className:"mr-2 h-4 w-4"}),"Start Migration"]})})}),h&&(0,t.jsxs)(i.Alert,{variant:"destructive",children:[(0,t.jsx)(n.X,{className:"h-4 w-4"}),(0,t.jsx)(i.AlertDescription,{children:h})]}),m.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsx)(a.Card,{className:"border-green-500/20 bg-green-500/10",children:(0,t.jsx)(a.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-400",children:b}),(0,t.jsx)("div",{className:"text-sm text-green-300",children:"Success"})]})})}),(0,t.jsx)(a.Card,{className:"border-red-500/20 bg-red-500/10",children:(0,t.jsx)(a.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-400",children:f}),(0,t.jsx)("div",{className:"text-sm text-red-300",children:"Errors"})]})})}),(0,t.jsx)(a.Card,{className:"border-purple-500/20 bg-purple-500/10",children:(0,t.jsx)(a.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:j}),(0,t.jsx)("div",{className:"text-sm text-purple-300",children:"Records"})]})})})]}),(0,t.jsxs)(a.Card,{className:"border-slate-700 bg-slate-800/50",children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{className:"text-lg text-white",children:"Migration Results"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"space-y-2",children:m.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-slate-700 bg-slate-900/50 p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:["success"===e.status&&(0,t.jsx)(c.Check,{className:"h-5 w-5 text-green-400"}),"error"===e.status&&(0,t.jsx)(n.X,{className:"h-5 w-5 text-red-400"}),"skipped"===e.status&&(0,t.jsx)(o.AlertCircle,{className:"h-5 w-5 text-yellow-400"}),(0,t.jsx)("span",{className:"font-mono text-sm text-white",children:e.table})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[void 0!==e.migrated&&(0,t.jsxs)(x.Badge,{variant:"outline",className:"border-purple-500/30 text-purple-300",children:[e.migrated," records"]}),(0,t.jsx)(x.Badge,{variant:"success"===e.status?"default":"error"===e.status?"destructive":"secondary",children:e.status})]})]},s))})})]})]})]})]})})})}e.s(["default",()=>u])}]);