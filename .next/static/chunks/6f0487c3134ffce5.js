(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42242,e=>{"use strict";let s=(0,e.i(11317).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],42242)},46600,e=>{"use strict";let s=(0,e.i(11317).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>s],46600)},70426,e=>{"use strict";var s=e.i(34355),t=e.i(49094);function a({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function r({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function i({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...a})}function n({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...a})}function c({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>c,"CardDescription",()=>n,"CardHeader",()=>r,"CardTitle",()=>i])},28226,e=>{"use strict";let s=(0,e.i(11317).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>s],28226)},89247,e=>{"use strict";let s=(0,e.i(11317).default)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);e.s(["Database",()=>s],89247)},24167,e=>{"use strict";let s=(0,e.i(11317).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>s],24167)},80285,e=>{"use strict";let s=(0,e.i(11317).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>s],80285)},78229,e=>{"use strict";var s=e.i(34355),t=e.i(84025),a=e.i(13993),r=e.i(38589),i=e.i(70426),n=e.i(89247),c=e.i(52400),d=e.i(24167),l=e.i(42242),o=e.i(28226);function u(){let[e,a]=(0,t.useState)([{name:"Check Database Connection",status:"pending"},{name:"Seed Forum Categories",status:"pending"},{name:"Seed Sample Assets",status:"pending"},{name:"Create Admin User",status:"pending"}]),[u,m]=(0,t.useState)(!1),[h,x]=(0,t.useState)(!1),[p,g]=(0,t.useState)(null),f=(e,s,t)=>{a(a=>a.map((a,r)=>r===e?{...a,status:s,message:t}:a))},j=async()=>{m(!0),g(null),f(0,"running");try{if((await fetch("/api/stats")).ok)f(0,"success","Connected to Supabase");else throw Error("Connection failed")}catch(e){f(0,"error","Failed to connect to database"),g("Please ensure Supabase is properly connected in the sidebar"),m(!1);return}f(1,"running");try{let e=await fetch("/api/seed",{method:"POST"}),s=await e.json();if(e.ok)"Already seeded"===s.message?(f(1,"success","Categories already exist"),f(2,"success",`${s.count||0} assets exist`)):(f(1,"success",`${s.categories||6} categories created`),f(2,"success",`${s.seeded||0} assets created`));else throw Error(s.error||"Seed failed")}catch(e){e.message?.includes("does not exist")?(f(1,"error","Tables not created yet"),f(2,"error","Run SQL scripts first"),g("Please run the SQL scripts in the /scripts folder to create the database tables first")):(f(1,"error",e.message||"Seed failed"),f(2,"error","Check console for details"))}f(3,"running");try{let e=await fetch("/api/force-admin"),s=await e.json();s.adminCount>0?f(3,"success",`${s.adminCount} admin(s) configured`):s.currentUser?f(3,"success","Login detected - click 'Become Admin' in admin panel"):f(3,"success","Login with Discord to become admin")}catch{f(3,"error","Admin check failed")}m(!1),x(e.every(e=>"success"===e.status||"error"===e.status))},C=e.every(e=>"success"===e.status);return(0,s.jsxs)(i.Card,{className:"w-full max-w-md mx-auto",children:[(0,s.jsxs)(i.CardHeader,{children:[(0,s.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(n.Database,{className:"h-5 w-5"}),"Database Setup"]}),(0,s.jsx)(i.CardDescription,{children:"Initialize your FiveM Tools database with sample data"})]}),(0,s.jsxs)(i.CardContent,{className:"space-y-4",children:[e.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3",children:["pending"===e.status&&(0,s.jsx)("div",{className:"h-5 w-5 rounded-full border-2 border-muted"}),"running"===e.status&&(0,s.jsx)(l.Loader2,{className:"h-5 w-5 animate-spin text-primary"}),"success"===e.status&&(0,s.jsx)(c.CheckCircle,{className:"h-5 w-5 text-green-500"}),"error"===e.status&&(0,s.jsx)(d.XCircle,{className:"h-5 w-5 text-red-500"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:e.name}),e.message&&(0,s.jsx)("p",{className:`text-xs ${"error"===e.status?"text-red-400":"text-muted-foreground"}`,children:e.message})]})]},e.name)),p&&(0,s.jsx)("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:(0,s.jsx)("p",{className:"text-sm text-red-400",children:p})}),(0,s.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,s.jsx)(r.Button,{onClick:j,disabled:u,className:"flex-1",children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Running..."]}):C?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.CheckCircle,{className:"h-4 w-4 mr-2"}),"Complete!"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Database,{className:"h-4 w-4 mr-2"}),"Initialize Database"]})}),h&&(0,s.jsx)(r.Button,{onClick:()=>{a([{name:"Check Database Connection",status:"pending"},{name:"Seed Forum Categories",status:"pending"},{name:"Seed Sample Assets",status:"pending"},{name:"Create Admin User",status:"pending"}]),x(!1),g(null)},variant:"outline",size:"icon",children:(0,s.jsx)(o.RefreshCw,{className:"h-4 w-4"})})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"Make sure to run the SQL scripts in /scripts folder first"})]})]})}var m=e.i(48066),h=e.i(80285),x=e.i(46600);function p(){let{user:e,isLoading:i,login:n,isAdmin:c}=(0,m.useAuth)(),d=(0,a.useRouter)(),[l,o]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/stats"),s=await e.json();s.users>0&&s.assets>0&&o(!0)}catch{}})()},[]),(0,s.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-lg space-y-6",children:[(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"FiveM Tools Setup"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Get your marketplace up and running in minutes"})]}),!e&&!i&&(0,s.jsxs)("div",{className:"glass rounded-2xl p-6 text-center space-y-4",children:[(0,s.jsx)(x.Shield,{className:"h-12 w-12 mx-auto text-primary"}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Login Required"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Please login with Discord to set up the database. The first user to login will become the admin."}),(0,s.jsx)(r.Button,{onClick:n,className:"bg-[#5865F2] hover:bg-[#4752C4]",children:"Login with Discord"})]}),i&&(0,s.jsxs)("div",{className:"glass rounded-2xl p-6 text-center",children:[(0,s.jsx)("div",{className:"h-8 w-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]}),e&&(0,s.jsx)(u,{}),l&&(0,s.jsxs)("div",{className:"glass rounded-2xl p-6 text-center space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-green-500",children:"Setup Complete!"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Your FiveM Tools marketplace is ready to use."}),(0,s.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,s.jsxs)(r.Button,{onClick:()=>d.push("/"),className:"gap-2",children:["Go to Homepage",(0,s.jsx)(h.ArrowRight,{className:"h-4 w-4"})]}),c&&(0,s.jsxs)(r.Button,{onClick:()=>d.push("/admin"),variant:"outline",className:"gap-2",children:[(0,s.jsx)(x.Shield,{className:"h-4 w-4"}),"Admin Panel"]})]})]})]})})}e.s(["default",()=>p],78229)}]);