(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46600,e=>{"use strict";let t=(0,e.i(11317).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],46600)},61833,e=>{"use strict";var t=e.i(34355),s=e.i(49094);function a({className:e,type:a,...r}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>a])},8700,e=>{"use strict";var t=e.i(84025),s=e.i(55161);function a(e){let[a,r]=t.useState(void 0);return(0,s.useLayoutEffect)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let s,a;if(!Array.isArray(t)||!t.length)return;let i=t[0];if("borderBoxSize"in i){let e=i.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,a=t.blockSize}else s=e.offsetWidth,a=e.offsetHeight;r({width:s,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),a}e.s(["useSize",()=>a])},42242,e=>{"use strict";let t=(0,e.i(11317).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],42242)},83106,e=>{"use strict";let t=(0,e.i(11317).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["default",()=>t])},52353,e=>{"use strict";var t=e.i(34355),s=e.i(97886),a=e.i(85866),r=e.i(49094);let i=(0,a.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:a,asChild:l=!1,...n}){let o=l?s.Slot:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,r.cn)(i({variant:a}),e),...n})}e.s(["Badge",()=>l])},70426,e=>{"use strict";var t=e.i(34355),s=e.i(49094);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function r({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>n,"CardDescription",()=>l,"CardHeader",()=>r,"CardTitle",()=>i])},80012,e=>{"use strict";let t=(0,e.i(11317).default)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);e.s(["History",()=>t],80012)},64651,e=>{"use strict";let t=(0,e.i(11317).default)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);e.s(["Trophy",()=>t],64651)},96530,e=>{"use strict";var t=e.i(34355),s=e.i(84025),a=e.i(3339),r=e.i(53746),i=e.i(38589),l=e.i(70426),n=e.i(52353),o=e.i(48066),d=e.i(49094),c=e.i(80012),m=e.i(64651);let x=(0,e.i(11317).default)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);var h=e.i(42242),u=e.i(27622),p=e.i(64354);let f="https://cdn3d.iconscout.com/3d/premium/thumb/ticket-3d-icon-png-download-9964703.png",g="https://media.tenor.com/jX0Ytn_JLcIAAAAj/mario-coins.gif",b={common:"#6b7280",uncommon:"#22c55e",rare:"#3b82f6",epic:"#a855f7",legendary:"#eab308"},j=e=>e>=500?"legendary":e>=250?"epic":e>=100?"rare":e>=25?"uncommon":"common";function v(){let{user:e}=(0,o.useAuth)(),[v,y]=(0,s.useState)([]),[w,N]=(0,s.useState)(!1),[k,C]=(0,s.useState)(0),[S,z]=(0,s.useState)(null),[M,T]=(0,s.useState)(!1),[A,I]=(0,s.useState)([]),[L,O]=(0,s.useState)(0),[B,P]=(0,s.useState)(0),[H,E]=(0,s.useState)(!0),[$,_]=(0,s.useState)(!1),[Y,V]=(0,s.useState)(!1),[W,D]=(0,s.useState)(0),K=(0,s.useCallback)(async()=>{try{let e=await fetch("/api/spin-wheel/prizes");if(e.ok){let t=await e.json();y(t.prizes||[])}}catch(e){console.error("Error fetching prizes:",e)}},[]),R=(0,s.useCallback)(async()=>{if(e)try{let[e,t,s]=await Promise.all([fetch("/api/user/coins"),fetch("/api/spin-wheel/history"),fetch("/api/spin-tickets/claim")]);if(e.ok){let t=await e.json();O(t.coins||0),P(t.tickets||0)}if(t.ok){let e=await t.json();I(e.history||[])}if(s.ok){let e=await s.json();_(e.canClaim||!1),D(e.currentStreak||0),void 0!==e.totalTickets&&P(e.totalTickets)}}catch(e){console.error("Error fetching user data:",e)}finally{E(!1)}},[e]);(0,s.useEffect)(()=>{K()},[K]),(0,s.useEffect)(()=>{e?R():E(!1)},[e,R]);let U=async()=>{if(!Y&&$){V(!0);try{let e=await fetch("/api/spin-tickets/claim",{method:"POST"});if(e.ok){let t=await e.json();P(t.totalTickets||B+1),D(t.streak||0),_(!1),(0,p.default)({particleCount:50,spread:60,origin:{y:.7}})}}catch(e){console.error("Claim error:",e)}finally{V(!1)}}},F=async()=>{if(!w&&e&&!(B<1)){N(!0),z(null),T(!1);try{let e=await fetch("/api/spin-wheel/spin",{method:"POST"});if(!e.ok){let t=await e.json();alert(t.error||"Spin failed"),N(!1);return}let t=await e.json(),s=v.findIndex(e=>e.id===t.prize.id),a=360/v.length;C(2160+(360-s*a-a/2)),setTimeout(()=>{z(t.prize),T(!0),N(!1),P(t.newTickets),O(t.newBalance),I(e=>[{id:Date.now().toString(),prize_name:t.prize.name,coins_won:t.prize.coins,spin_type:"ticket",created_at:new Date().toISOString()},...e.slice(0,9)]),t.prize.coins>=100&&(0,p.default)({particleCount:100,spread:60,origin:{y:.6}})},4e3)}catch(e){console.error("Spin error:",e),N(!1)}}},q=v.filter(e=>e.coins>0),Z=q.length>0?360/q.length:45;return(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(a.Sidebar,{}),(0,t.jsxs)("main",{className:"md:ml-72 transition-all duration-300",children:[(0,t.jsx)(r.Header,{}),(0,t.jsxs)("div",{className:"p-4 md:p-6 max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500",children:"LUCKY SPIN"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Use tickets to spin and win coins!"})]}),(0,t.jsxs)("div",{className:"grid lg:grid-cols-3 gap-4 md:gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 flex flex-col items-center",children:[(0,t.jsxs)("div",{className:"relative w-72 h-72 md:w-80 md:h-80",children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-yellow-500/20 via-orange-500/20 to-red-500/20 blur-xl"}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-yellow-500/50 shadow-2xl shadow-yellow-500/20"}),(0,t.jsx)("div",{className:"absolute inset-2 rounded-full overflow-hidden transition-transform ease-out",style:{transform:`rotate(${k}deg)`,transitionDuration:w?"4000ms":"0ms"},children:(0,t.jsx)("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:q.map((e,s)=>{let a=s*Z,r=a+Z,i=Math.PI/180*(a-90),l=Math.PI/180*(r-90),n=50+48*Math.cos(i),o=50+48*Math.sin(i),d=50+48*Math.cos(l),c=50+48*Math.sin(l),m=`M 50 50 L ${n} ${o} A 48 48 0 ${+(Z>180)} 1 ${d} ${c} Z`,x=(a+r)/2,h=Math.PI/180*(x-90),u=50+30*Math.cos(h),p=50+30*Math.sin(h),f=b[e.rarity||j(e.coins)];return(0,t.jsxs)("g",{children:[(0,t.jsx)("path",{d:m,fill:f,stroke:"#1a1a2e",strokeWidth:"0.3"}),(0,t.jsx)("text",{x:u,y:p,textAnchor:"middle",dominantBaseline:"middle",fill:"white",fontSize:"6",fontWeight:"bold",transform:`rotate(${x}, ${u}, ${p})`,style:{textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:e.coins})]},e.id)})})}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,t.jsx)("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 shadow-lg flex items-center justify-center border-2 border-white/50",children:(0,t.jsx)("img",{src:g||"/placeholder.svg",alt:"Coin",className:"w-10 h-10",loading:"lazy"})})}),(0,t.jsx)("div",{className:"absolute top-1/2 -right-1 transform -translate-y-1/2 z-10",children:(0,t.jsx)("div",{className:"w-6 h-6 bg-gradient-to-r from-red-500 to-red-600 rotate-45 transform origin-center shadow-lg",style:{clipPath:"polygon(0 50%, 100% 0, 100% 100%)"}})})]}),(0,t.jsx)("div",{className:"mt-6 w-full max-w-sm space-y-4",children:e?H?(0,t.jsx)("div",{className:"text-center text-muted-foreground text-sm",children:"Loading..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-center gap-4 mb-4",children:[(0,t.jsx)(l.Card,{className:"bg-gradient-to-br from-yellow-500/20 to-orange-500/20 border-yellow-500/30",children:(0,t.jsxs)(l.CardContent,{className:"flex items-center gap-3 p-3",children:[(0,t.jsx)("img",{src:g||"/placeholder.svg",alt:"Coins",className:"w-8 h-8",loading:"lazy"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Your Coins"}),(0,t.jsx)("p",{className:"font-bold text-xl text-yellow-400",children:L.toLocaleString()})]})]})}),(0,t.jsx)(l.Card,{className:"bg-gradient-to-br from-purple-500/20 to-pink-500/20 border-purple-500/30",children:(0,t.jsxs)(l.CardContent,{className:"flex items-center gap-3 p-3",children:[(0,t.jsx)("img",{src:f||"/placeholder.svg",alt:"Tickets",className:"w-8 h-8",loading:"lazy"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Your Tickets"}),(0,t.jsx)("p",{className:"font-bold text-xl text-purple-400",children:B})]})]})})]}),(0,t.jsx)(i.Button,{onClick:F,disabled:w||B<1,className:(0,d.cn)("w-full py-8 rounded-xl font-bold text-lg flex items-center justify-center gap-3",B>=1?"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 shadow-lg shadow-purple-500/30":"bg-muted text-muted-foreground"),children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Loader2,{className:"w-6 h-6 animate-spin"}),(0,t.jsx)("span",{children:"SPINNING..."})]}):B>=1?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:f||"/placeholder.svg",alt:"Ticket",className:"w-8 h-8",loading:"lazy"}),(0,t.jsx)("span",{children:"SPIN NOW!"}),(0,t.jsxs)(n.Badge,{className:"bg-white/20 text-white",children:[B," tickets"]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x,{className:"w-6 h-6"}),(0,t.jsx)("span",{children:"NO TICKETS"})]})}),$&&(0,t.jsxs)(i.Button,{onClick:U,disabled:Y,className:"w-full py-4 rounded-xl font-bold bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 shadow-lg shadow-green-500/20",children:[Y?(0,t.jsx)(h.Loader2,{className:"w-5 h-5 animate-spin mr-2"}):(0,t.jsx)(x,{className:"w-5 h-5 mr-2"}),"CLAIM DAILY TICKET",W>0&&(0,t.jsxs)(n.Badge,{className:"ml-2 bg-white/20 text-white",children:[W," day streak!"]})]}),B<1&&!$&&(0,t.jsx)("p",{className:"text-xs text-center text-muted-foreground",children:"Come back tomorrow to claim your daily ticket!"})]}):(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-muted-foreground text-sm mb-3",children:"Login to spin!"}),(0,t.jsx)(i.Button,{onClick:()=>(0,u.signIn)("discord"),className:"bg-[#5865F2] hover:bg-[#4752C4] text-white px-6 py-2 rounded-xl",children:"Login with Discord"})]})}),M&&S&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,t.jsx)(l.Card,{className:"bg-card border-2 border-yellow-500/50 max-w-sm w-full animate-in zoom-in-95",children:(0,t.jsxs)(l.CardContent,{className:"p-6 text-center",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"ðŸŽ‰"}),(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"YOU WON!"}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4",children:[(0,t.jsx)("img",{src:g||"/placeholder.svg",alt:"Coins",className:"w-10 h-10"}),(0,t.jsxs)("span",{className:"text-4xl font-black text-yellow-400",children:["+",S.coins]})]}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:S.name}),(0,t.jsx)(i.Button,{onClick:()=>T(!1),className:"w-full",children:"AWESOME!"})]})})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(l.Card,{className:"bg-card/50 backdrop-blur border-border/50",children:(0,t.jsxs)(l.CardContent,{className:"p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(m.Trophy,{className:"w-4 h-4 text-yellow-400"}),(0,t.jsx)("h3",{className:"font-bold text-sm",children:"PRIZE POOL"})]}),(0,t.jsx)("div",{className:"space-y-1.5 max-h-48 overflow-y-auto",children:q.map(e=>{let s=e.rarity||j(e.coins);return(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg",style:{backgroundColor:`${b[s]}20`},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("img",{src:g||"/placeholder.svg",alt:"Coins",className:"w-4 h-4",loading:"lazy"}),(0,t.jsx)("span",{className:"font-medium text-xs",children:e.name}),"legendary"===s&&(0,t.jsx)(n.Badge,{className:"bg-yellow-500/20 text-yellow-400 text-[8px] px-1 py-0",children:"JACKPOT"})]}),(0,t.jsxs)("span",{className:"font-bold text-xs text-yellow-400",children:["+",e.coins]})]},e.id)})})]})}),e&&A.length>0&&(0,t.jsx)(l.Card,{className:"bg-card/50 backdrop-blur border-border/50",children:(0,t.jsxs)(l.CardContent,{className:"p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(c.History,{className:"w-4 h-4 text-primary"}),(0,t.jsx)("h3",{className:"font-bold text-sm",children:"YOUR HISTORY"})]}),(0,t.jsx)("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:A.slice(0,5).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-1.5 rounded bg-accent/30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("img",{src:g||"/placeholder.svg",alt:"Coins",className:"w-3 h-3",loading:"lazy"}),(0,t.jsx)("span",{className:"text-xs",children:e.prize_name})]}),(0,t.jsxs)("span",{className:"text-xs font-bold text-yellow-400",children:["+",e.coins_won]})]},e.id))})]})}),(0,t.jsx)(l.Card,{className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 border-purple-500/20",children:(0,t.jsxs)(l.CardContent,{className:"p-3",children:[(0,t.jsxs)("h3",{className:"font-bold text-sm mb-2 flex items-center gap-2",children:[(0,t.jsx)(x,{className:"w-4 h-4 text-purple-400"}),"How to Get Tickets"]}),(0,t.jsxs)("ul",{className:"text-xs text-muted-foreground space-y-1",children:[(0,t.jsx)("li",{children:"â€¢ Claim daily ticket (streak bonus!)"}),(0,t.jsx)("li",{children:"â€¢ Vote for the server on top.gg"}),(0,t.jsx)("li",{children:"â€¢ Special events & giveaways"}),(0,t.jsx)("li",{children:"â€¢ Admin granted bonus tickets"})]})]})})]})]})]})]})]})}e.s(["default",()=>v],96530)}]);