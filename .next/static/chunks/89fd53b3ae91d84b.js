(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46600,e=>{"use strict";let s=(0,e.i(11317).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>s],46600)},61833,e=>{"use strict";var s=e.i(34355),r=e.i(49094);function t({className:e,type:t,...a}){return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...a})}e.s(["Input",()=>t])},8700,e=>{"use strict";var s=e.i(84025),r=e.i(55161);function t(e){let[t,a]=s.useState(void 0);return(0,r.useLayoutEffect)(()=>{if(e){a({width:e.offsetWidth,height:e.offsetHeight});let s=new ResizeObserver(s=>{let r,t;if(!Array.isArray(s)||!s.length)return;let i=s[0];if("borderBoxSize"in i){let e=i.borderBoxSize,s=Array.isArray(e)?e[0]:e;r=s.inlineSize,t=s.blockSize}else r=e.offsetWidth,t=e.offsetHeight;a({width:r,height:t})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}a(void 0)},[e]),t}e.s(["useSize",()=>t])},42242,e=>{"use strict";let s=(0,e.i(11317).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],42242)},83106,e=>{"use strict";let s=(0,e.i(11317).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["default",()=>s])},52353,e=>{"use strict";var s=e.i(34355),r=e.i(97886),t=e.i(85866),a=e.i(49094);let i=(0,t.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:t,asChild:d=!1,...n}){let l=d?r.Slot:"span";return(0,s.jsx)(l,{"data-slot":"badge",className:(0,a.cn)(i({variant:t}),e),...n})}e.s(["Badge",()=>d])},37612,e=>{"use strict";let s=(0,e.i(11317).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],37612)},51950,e=>{"use strict";let s=(0,e.i(11317).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>s],51950)},28226,e=>{"use strict";let s=(0,e.i(11317).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>s],28226)},52368,e=>{"use strict";var s=e.i(83106);e.s(["Check",()=>s.default])},27381,e=>{"use strict";let s=(0,e.i(11317).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>s],27381)},89682,e=>{"use strict";var s=e.i(34355),r=e.i(84025),t=e.i(13993),a=e.i(3339),i=e.i(53746),d=e.i(38589),n=e.i(61833),l=e.i(52353),o=e.i(48066),c=e.i(37612),m=e.i(74888),u=e.i(81987),x=e.i(46600),h=e.i(11317);let f=(0,h.default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var b=e.i(51950);let p=(0,h.default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var g=e.i(14156),v=e.i(52368),j=e.i(42242),y=e.i(27381),N=e.i(28226),w=e.i(82244),k=e.i(84175),S=e.i(26047);function C(){let{user:e,isLoading:h,refreshUser:C}=(0,o.useAuth)(),M=(0,t.useRouter)(),[z,B]=(0,r.useState)(!1),[A,T]=(0,r.useState)(!1),[R,I]=(0,r.useState)(null),[L,D]=(0,r.useState)(""),[P,U]=(0,r.useState)(""),[H,V]=(0,r.useState)(""),[E,O]=(0,r.useState)({emailNotifications:!0,forumReplies:!0,newDownloads:!1,promotions:!1});(0,r.useEffect)(()=>{e&&(D(e.username||""),U(e.bio||""),V(e.avatar||""))},[e]),(0,r.useEffect)(()=>{h||e||M.push("/")},[e,h,M]);let F=async()=>{if(e){B(!0),I(null),T(!1);try{let s=await fetch("/api/profile/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id,username:L,bio:P,avatar:H})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to save profile")}T(!0),C&&await C(),setTimeout(()=>T(!1),3e3)}catch(e){I(e.message)}finally{B(!1)}}},q=async()=>{if(e){B(!0),I(null);try{if(!(await fetch("/api/profile/notifications",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id,...E})})).ok)throw Error("Failed to save notifications");T(!0),setTimeout(()=>T(!1),3e3)}catch(e){I(e.message)}finally{B(!1)}}};return h?(0,s.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,s.jsx)("div",{className:"h-12 w-12 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):e?(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)(a.Sidebar,{}),(0,s.jsxs)("main",{className:"md:ml-72 transition-all duration-300",children:[(0,s.jsx)(i.Header,{}),(0,s.jsxs)("div",{className:"p-6 max-w-4xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-6",children:[(0,s.jsxs)(w.default,{href:"/dashboard",className:"hover:text-foreground transition-colors flex items-center gap-1",children:[(0,s.jsx)(c.ArrowLeft,{className:"h-4 w-4"}),"Dashboard"]}),(0,s.jsx)("span",{children:"/"}),(0,s.jsx)("span",{className:"text-foreground",children:"Settings"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Settings"}),A&&(0,s.jsxs)(l.Badge,{className:"bg-success/20 text-success border-success/30 gap-1",children:[(0,s.jsx)(v.Check,{className:"h-3 w-3"}),"Saved successfully"]})]}),R&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-destructive/10 border border-destructive/30 rounded-xl text-destructive",children:R}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-xl bg-primary/20 flex items-center justify-center",children:(0,s.jsx)(m.User,{className:"h-5 w-5 text-primary"})}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Profile Settings"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-6 mb-6",children:[(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("div",{className:"relative h-20 w-20 rounded-2xl overflow-hidden ring-2 ring-border",children:(0,s.jsx)(k.default,{src:H||e.avatar||"/placeholder.svg?height=80&width=80&query=user avatar",alt:e.username,fill:!0,className:"object-cover",unoptimized:!0})}),(0,s.jsx)("button",{className:"absolute inset-0 rounded-2xl bg-background/80 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:(0,s.jsx)(p,{className:"h-6 w-6 text-foreground"})})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Avatar URL"}),(0,s.jsx)(n.Input,{value:H,onChange:e=>V(e.target.value),placeholder:"https://example.com/avatar.png",className:"h-11 bg-secondary/50 border-border/50 rounded-xl"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Or use your Discord avatar by default"})]})]}),(0,s.jsxs)("div",{className:"grid gap-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Username"}),(0,s.jsx)(n.Input,{value:L,onChange:e=>D(e.target.value),className:"max-w-md h-11 bg-secondary/50 border-border/50 rounded-xl"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Email"}),(0,s.jsx)(n.Input,{value:e.email||"",type:"email",className:"max-w-md h-11 bg-secondary/50 border-border/50 rounded-xl",disabled:!0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Email is linked to your Discord account"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Discord ID"}),(0,s.jsx)(n.Input,{value:e.discordId||e.id||"",className:"max-w-md h-11 bg-secondary/50 border-border/50 rounded-xl font-mono",disabled:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Bio"}),(0,s.jsx)("textarea",{value:P,onChange:e=>U(e.target.value),className:"w-full max-w-md h-24 rounded-xl border border-border/50 bg-secondary/50 p-3 text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-primary/50 focus:outline-none resize-none",placeholder:"Tell us about yourself..."})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,s.jsxs)(d.Button,{onClick:F,disabled:z,className:"bg-primary hover:bg-primary/90 rounded-xl glow-sm gap-2",children:[z?(0,s.jsx)(j.Loader2,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(y.Save,{className:"h-4 w-4"}),"Save Changes"]}),(0,s.jsxs)(d.Button,{variant:"outline",onClick:()=>{D(e.username||""),U(e.bio||""),V(e.avatar||"")},className:"rounded-xl bg-transparent gap-2",children:[(0,s.jsx)(N.RefreshCw,{className:"h-4 w-4"}),"Reset"]})]})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-xl bg-warning/20 flex items-center justify-center",children:(0,s.jsx)(u.Bell,{className:"h-5 w-5 text-warning"})}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Notifications"})]}),(0,s.jsx)("div",{className:"space-y-1",children:[{key:"emailNotifications",label:"Email notifications",description:"Receive email notifications for important updates"},{key:"forumReplies",label:"Forum replies",description:"Get notified when someone replies to your posts"},{key:"newDownloads",label:"New downloads",description:"Get notified about new resources in your favorite categories"},{key:"promotions",label:"Promotions",description:"Receive promotional emails and special offers"}].map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between py-4 border-b border-border/30 last:border-0",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-foreground",children:e.label}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:E[e.key],onChange:s=>O(r=>({...r,[e.key]:s.target.checked})),className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-secondary rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]},e.key))}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsxs)(d.Button,{onClick:q,disabled:z,className:"bg-primary hover:bg-primary/90 rounded-xl glow-sm gap-2",children:[z?(0,s.jsx)(j.Loader2,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(y.Save,{className:"h-4 w-4"}),"Save Notifications"]})})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-xl bg-success/20 flex items-center justify-center",children:(0,s.jsx)(x.Shield,{className:"h-5 w-5 text-success"})}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Security"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between py-4 border-b border-border/30",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-foreground",children:"Discord Connection"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Connected as ",e.username]})]}),(0,s.jsxs)(l.Badge,{className:"bg-success/20 text-success border-success/30",children:[(0,s.jsx)(v.Check,{className:"h-3 w-3 mr-1"}),"Connected"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between py-4 border-b border-border/30",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-foreground",children:"Account Status"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Your account is in good standing"})]}),(0,s.jsxs)(l.Badge,{className:"admin"===e.membership?"bg-destructive/20 text-destructive border-destructive/30":"vip"===e.membership?"bg-primary/20 text-primary border-primary/30":"bg-secondary text-muted-foreground",children:["admin"===e.membership&&(0,s.jsx)(x.Shield,{className:"h-3 w-3 mr-1"}),"vip"===e.membership&&(0,s.jsx)(g.Crown,{className:"h-3 w-3 mr-1"}),e.membership.toUpperCase()]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-foreground",children:"Coins Balance"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Your current coin balance"})]}),(0,s.jsxs)(l.Badge,{className:"bg-warning/20 text-warning border-warning/30 text-lg px-3 flex items-center gap-2",children:[(0,s.jsx)(S.CoinIcon,{size:"sm"}),e.coins||0," Coins"]})]})]})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-xl bg-accent/20 flex items-center justify-center",children:(0,s.jsx)(f,{className:"h-5 w-5 text-accent"})}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Membership"})]}),(0,s.jsxs)("div",{className:`flex items-center justify-between p-5 rounded-xl border ${"vip"===e.membership||"admin"===e.membership?"bg-primary/10 border-primary/30":"bg-secondary/30 border-border/50"}`,children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:`h-12 w-12 rounded-xl flex items-center justify-center ${"admin"===e.membership?"bg-destructive/20":"vip"===e.membership?"bg-primary/20":"bg-secondary/50"}`,children:"admin"===e.membership?(0,s.jsx)(x.Shield,{className:"h-6 w-6 text-destructive"}):(0,s.jsx)(g.Crown,{className:"h-6 w-6 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-foreground",children:"admin"===e.membership?"Administrator":"vip"===e.membership?"VIP Membership":"Free Member"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"admin"===e.membership?"Full access to all features":"vip"===e.membership?"Premium benefits active":"Upgrade for more features"})]})]}),"free"===e.membership&&(0,s.jsx)(d.Button,{className:"bg-primary hover:bg-primary/90 rounded-xl glow-sm",children:"Upgrade to VIP"})]})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-6 border-destructive/30",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-xl bg-destructive/20 flex items-center justify-center",children:(0,s.jsx)(b.Trash2,{className:"h-5 w-5 text-destructive"})}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Danger Zone"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-foreground",children:"Delete Account"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Permanently delete your account and all data"})]}),(0,s.jsx)(d.Button,{variant:"destructive",size:"sm",className:"rounded-xl",children:"Delete Account"})]})]})]})]})]}):null}e.s(["default",()=>C],89682)}]);