(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46600,e=>{"use strict";let t=(0,e.i(11317).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],46600)},61833,e=>{"use strict";var t=e.i(34355),s=e.i(49094);function a({className:e,type:a,...r}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>a])},8700,e=>{"use strict";var t=e.i(84025),s=e.i(55161);function a(e){let[a,r]=t.useState(void 0);return(0,s.useLayoutEffect)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let s,a;if(!Array.isArray(t)||!t.length)return;let i=t[0];if("borderBoxSize"in i){let e=i.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,a=t.blockSize}else s=e.offsetWidth,a=e.offsetHeight;r({width:s,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),a}e.s(["useSize",()=>a])},42242,e=>{"use strict";let t=(0,e.i(11317).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],42242)},83106,e=>{"use strict";let t=(0,e.i(11317).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["default",()=>t])},52353,e=>{"use strict";var t=e.i(34355),s=e.i(97886),a=e.i(85866),r=e.i(49094);let i=(0,a.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:a,asChild:l=!1,...n}){let o=l?s.Slot:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,r.cn)(i({variant:a}),e),...n})}e.s(["Badge",()=>l])},49918,e=>{"use strict";var t=e.i(34355),s=e.i(84025),a=e.i(449),r=s.forwardRef((e,s)=>(0,t.jsx)(a.Primitive.label,{...e,ref:s,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label";var i=e.i(49094);function l({className:e,...s}){return(0,t.jsx)(r,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}e.s(["Label",()=>l],49918)},12323,e=>{"use strict";let t=(0,e.i(11317).default)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);e.s(["List",()=>t],12323)},6898,e=>{"use strict";let t=(0,e.i(11317).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],6898)},15944,e=>{"use strict";let t=(0,e.i(11317).default)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);e.s(["Code",()=>t],15944)},99783,e=>{"use strict";let t=(0,e.i(11317).default)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);e.s(["Smile",()=>t],99783)},98152,e=>{"use strict";let t=(0,e.i(11317).default)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);e.s(["Tag",()=>t],98152)},9481,e=>{"use strict";let t=(0,e.i(11317).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],9481)},49437,e=>{"use strict";let t=(0,e.i(11317).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],49437)},45650,e=>{"use strict";let t=(0,e.i(11317).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["ImageIcon",()=>t],45650)},59547,e=>{"use strict";let t=(0,e.i(11317).default)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);e.s(["Link2",()=>t],59547)},12576,e=>{"use strict";let t=(0,e.i(11317).default)("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);e.s(["AtSign",()=>t],12576)},92815,e=>{"use strict";let t=(0,e.i(11317).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>t],92815)},93834,e=>{"use strict";let t=(0,e.i(11317).default)("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);e.s(["Quote",()=>t],93834)},30633,e=>{"use strict";let t=(0,e.i(11317).default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["Minus",()=>t],30633)},84096,62494,70051,31565,99978,86545,89913,17528,19257,53140,e=>{"use strict";var t=e.i(11317);let s=(0,t.default)("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);e.s(["Bold",()=>s],84096);let a=(0,t.default)("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);e.s(["Italic",()=>a],62494);let r=(0,t.default)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);e.s(["Type",()=>r],70051);let i=(0,t.default)("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);e.s(["ListOrdered",()=>i],31565);let l=(0,t.default)("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);e.s(["AlignLeft",()=>l],99978);let n=(0,t.default)("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);e.s(["Table",()=>n],86545);let o=(0,t.default)("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);e.s(["Undo",()=>o],89913);let d=(0,t.default)("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);e.s(["Redo",()=>d],17528);let c=(0,t.default)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);e.s(["Paperclip",()=>c],19257);let h=(0,t.default)("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);e.s(["FileImage",()=>h],53140)},86323,e=>{"use strict";var t=e.i(34355),s=e.i(84025),a=e.i(3339),r=e.i(53746),i=e.i(38589),l=e.i(61833),n=e.i(48066),o=e.i(13993),d=e.i(84096),c=e.i(62494),h=e.i(70051),u=e.i(12576),m=e.i(49437),x=e.i(92815),p=e.i(12323),g=e.i(31565),y=e.i(99978);let b=(0,e.i(11317).default)("Pilcrow",[["path",{d:"M13 4v16",key:"8vvj80"}],["path",{d:"M17 4v16",key:"7dpous"}],["path",{d:"M19 4H9.5a4.5 4.5 0 0 0 0 9H13",key:"sh4n9v"}]]);var f=e.i(99783),v=e.i(59547),j=e.i(45650),k=e.i(93834),w=e.i(86545),N=e.i(30633),C=e.i(15944),M=e.i(89913),S=e.i(17528),z=e.i(19257),B=e.i(88924),L=e.i(42242),I=e.i(53140),D=e.i(25524),$=e.i(36421),T=e.i(49918);function A({value:e,onChange:a,placeholder:r="Write something...",minHeight:n="200px",maxFiles:o=10,onFilesChange:A,files:H=[]}){let R=(0,s.useRef)(null),F=(0,s.useRef)(null),[q,P]=(0,s.useState)(!1),[U,O]=(0,s.useState)(!1),[E,V]=(0,s.useState)(!1),[Q,W]=(0,s.useState)(""),[G,K]=(0,s.useState)(""),[X,Y]=(0,s.useState)(""),[_,J]=(0,s.useState)(""),[Z,ee]=(0,s.useState)([e]),[et,es]=(0,s.useState)(0),ea=(0,s.useCallback)((t,s="",r="")=>{let i=R.current;if(!i)return;let l=i.selectionStart,n=i.selectionEnd,o=e.substring(l,n)||r,d=e.substring(0,l)+t+o+s+e.substring(n);a(d),ee(e=>[...e.slice(0,et+1),d]),es(e=>e+1),setTimeout(()=>{i.focus();let e=l+t.length+o.length;i.setSelectionRange(e,e)},0)},[e,a,et]),er=e=>ea("\n"+"#".repeat(e)+" ","\n","Heading"),ei=async e=>{let t=e.target.files;if(!t||!A)return;let s=o-H.length;for(let e of Array.from(t).slice(0,s)){let t=e.type.startsWith("image/"),s={id:`temp-${Date.now()}-${Math.random()}`,name:e.name,url:URL.createObjectURL(e),type:t?"image":"file",uploading:!0};A([...H,s]);try{let t=new FormData;t.append("file",e),t.append("folder","threads");let a=await fetch("/api/upload/blob",{method:"POST",body:t});if(!a.ok)throw Error("Upload failed");let r=await a.json();A(H.map(e=>e.id===s.id?{...e,url:r.url,uploading:!1}:e))}catch{A(H.map(e=>e.id===s.id?{...e,uploading:!1,error:"Failed"}:e))}}F.current&&(F.current.value="")};return(0,t.jsxs)("div",{className:"border border-border rounded-xl overflow-hidden bg-card",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 p-2 border-b border-border bg-secondary/30 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex items-center gap-0.5 pr-2 border-r border-border/50",children:[(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",onClick:()=>a(""),title:"Clear",children:(0,t.jsx)(B.X,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",onClick:()=>ea("**","**","bold text"),title:"Bold (Ctrl+B)",children:(0,t.jsx)(d.Bold,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",onClick:()=>ea("*","*","italic text"),title:"Italic (Ctrl+I)",children:(0,t.jsx)(c.Italic,{className:"h-4 w-4"})}),(0,t.jsxs)(D.DropdownMenu,{children:[(0,t.jsx)(D.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",title:"Heading",children:(0,t.jsx)(h.Type,{className:"h-4 w-4"})})}),(0,t.jsxs)(D.DropdownMenuContent,{align:"start",children:[(0,t.jsx)(D.DropdownMenuItem,{onClick:()=>er(1),children:(0,t.jsx)("span",{className:"text-xl font-bold",children:"Heading 1"})}),(0,t.jsx)(D.DropdownMenuItem,{onClick:()=>er(2),children:(0,t.jsx)("span",{className:"text-lg font-bold",children:"Heading 2"})}),(0,t.jsx)(D.DropdownMenuItem,{onClick:()=>er(3),children:(0,t.jsx)("span",{className:"text-base font-bold",children:"Heading 3"})})]})]}),(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",onClick:()=>ea("@","","username"),title:"Mention",children:(0,t.jsx)(u.AtSign,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",onClick:()=>P(!q),title:"Toggle Preview",children:(0,t.jsx)(m.Eye,{className:"h-4 w-4"})}),(0,t.jsxs)(D.DropdownMenu,{children:[(0,t.jsx)(D.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",children:(0,t.jsx)(x.MoreHorizontal,{className:"h-4 w-4"})})}),(0,t.jsxs)(D.DropdownMenuContent,{align:"start",children:[(0,t.jsx)(D.DropdownMenuItem,{onClick:()=>ea("~~","~~","strikethrough"),children:"Strikethrough"}),(0,t.jsx)(D.DropdownMenuItem,{onClick:()=>ea("<sub>","</sub>","subscript"),children:"Subscript"}),(0,t.jsx)(D.DropdownMenuItem,{onClick:()=>ea("<sup>","</sup>","superscript"),children:"Superscript"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-0.5 px-2 border-r border-border/50",children:[(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",onClick:()=>ea("\n- ","\n","List item"),title:"Bullet List",children:(0,t.jsx)(p.List,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",onClick:()=>ea("\n1. ","\n","List item"),title:"Numbered List",children:(0,t.jsx)(g.ListOrdered,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",title:"Align",children:(0,t.jsx)(y.AlignLeft,{className:"h-4 w-4"})}),(0,t.jsxs)(D.DropdownMenu,{children:[(0,t.jsx)(D.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",title:"Paragraph",children:(0,t.jsx)(b,{className:"h-4 w-4"})})}),(0,t.jsxs)(D.DropdownMenuContent,{children:[(0,t.jsx)(D.DropdownMenuItem,{onClick:()=>ea("\n\n","",""),children:"New Paragraph"}),(0,t.jsx)(D.DropdownMenuItem,{onClick:()=>ea("\n","",""),children:"Line Break"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-0.5 px-2 border-r border-border/50",children:[(0,t.jsxs)(D.DropdownMenu,{children:[(0,t.jsx)(D.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",title:"Emoji",children:(0,t.jsx)(f.Smile,{className:"h-4 w-4"})})}),(0,t.jsx)(D.DropdownMenuContent,{className:"grid grid-cols-8 gap-1 p-2 w-auto",children:["ðŸ˜€","ðŸ˜‚","ðŸ˜","ðŸ¤”","ðŸ‘","ðŸ‘Ž","â¤ï¸","ðŸ”¥","â­","âœ…","âŒ","ðŸŽ‰","ðŸ’¯","ðŸš€","ðŸ’¡","âš¡"].map(e=>(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-lg",onClick:()=>ea(e,""),children:e},e))})]}),(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",onClick:()=>O(!0),title:"Insert Link",children:(0,t.jsx)(v.Link2,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",onClick:()=>V(!0),title:"Insert Image URL",children:(0,t.jsx)(j.ImageIcon,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",title:"GIF",children:(0,t.jsx)("span",{className:"text-xs font-bold",children:"GIF"})}),(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",onClick:()=>ea("\n> ","\n","Quote"),title:"Quote",children:(0,t.jsx)(k.Quote,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",onClick:()=>{ea(`
| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| Cell 1   | Cell 2   | Cell 3   |
| Cell 4   | Cell 5   | Cell 6   |
`,"")},title:"Table",children:(0,t.jsx)(w.Table,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",onClick:()=>ea("\n\n---\n\n",""),title:"Divider",children:(0,t.jsx)(N.Minus,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",onClick:()=>ea("\n```\n","\n```\n","code"),title:"Code Block",children:(0,t.jsx)(C.Code,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-0.5 ml-auto",children:[(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",onClick:()=>{et>0&&(es(e=>e-1),a(Z[et-1]))},disabled:0===et,title:"Undo",children:(0,t.jsx)(M.Undo,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-secondary",onClick:()=>{et<Z.length-1&&(es(e=>e+1),a(Z[et+1]))},disabled:et>=Z.length-1,title:"Redo",children:(0,t.jsx)(S.Redo,{className:"h-4 w-4"})}),(0,t.jsxs)(i.Button,{type:"button",variant:q?"secondary":"ghost",size:"sm",className:"h-8 rounded-lg gap-1.5 ml-2",onClick:()=>P(!q),children:[(0,t.jsx)(m.Eye,{className:"h-4 w-4"}),"Preview"]})]})]}),(0,t.jsx)("div",{className:"relative",style:{minHeight:n},children:q?(0,t.jsx)("div",{className:"p-4 prose prose-invert max-w-none",style:{minHeight:n},dangerouslySetInnerHTML:{__html:e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code class='bg-secondary px-1 rounded'>$1</code>").replace(/^### (.*$)/gim,"<h3 class='text-lg font-semibold mt-4 mb-2'>$1</h3>").replace(/^## (.*$)/gim,"<h2 class='text-xl font-semibold mt-4 mb-2'>$1</h2>").replace(/^# (.*$)/gim,"<h1 class='text-2xl font-bold mt-4 mb-2'>$1</h1>").replace(/^> (.*$)/gim,"<blockquote class='border-l-4 border-primary pl-4 italic my-2'>$1</blockquote>").replace(/^- (.*$)/gim,"<li class='ml-4'>$1</li>").replace(/^\d+\. (.*$)/gim,"<li class='ml-4 list-decimal'>$1</li>").replace(/\[([^\]]+)\]$$([^)]+)$$/g,"<a href='$2' class='text-primary underline'>$1</a>").replace(/!\[([^\]]*)\]$$([^)]+)$$/g,"<img src='$2' alt='$1' class='max-w-full rounded-lg my-2' />").replace(/^---$/gim,"<hr class='my-4 border-border' />").replace(/\n/g,"<br />")||`<span class="text-muted-foreground">${r}</span>`}}):(0,t.jsx)("textarea",{ref:R,value:e,onChange:e=>{a(e.target.value),ee(t=>[...t.slice(0,et+1),e.target.value]),es(e=>e+1)},placeholder:r,className:"w-full p-4 bg-transparent text-foreground placeholder:text-muted-foreground resize-none focus:outline-none",style:{minHeight:n}})}),H.length>0&&(0,t.jsx)("div",{className:"p-3 border-t border-border bg-secondary/20",children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:H.map(e=>(0,t.jsxs)("div",{className:"relative group flex items-center gap-2 bg-secondary/50 rounded-lg p-2 pr-8",children:["image"===e.type?(0,t.jsx)("div",{className:"h-10 w-10 rounded overflow-hidden",children:(0,t.jsx)("img",{src:e.url||"/placeholder.svg",alt:e.name,className:"h-full w-full object-cover"})}):(0,t.jsx)(I.FileImage,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-sm text-foreground truncate max-w-[120px]",children:e.name}),e.uploading&&(0,t.jsx)(L.Loader2,{className:"h-4 w-4 animate-spin text-primary"}),e.error&&(0,t.jsx)("span",{className:"text-xs text-destructive",children:e.error}),(0,t.jsx)("button",{type:"button",onClick:()=>{var t;return t=e.id,void(A&&A(H.filter(e=>e.id!==t)))},className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 rounded-full bg-background/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-destructive hover:text-white",children:(0,t.jsx)(B.X,{className:"h-3 w-3"})})]},e.id))})}),(0,t.jsxs)("div",{className:"p-3 border-t border-border",children:[(0,t.jsx)("input",{ref:F,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt",onChange:ei,className:"hidden"}),(0,t.jsxs)(i.Button,{type:"button",variant:"ghost",size:"sm",className:"gap-2 text-primary hover:text-primary",onClick:()=>F.current?.click(),disabled:H.length>=o,children:[(0,t.jsx)(z.Paperclip,{className:"h-4 w-4"}),"Attach files",H.length>0&&(0,t.jsxs)("span",{className:"text-muted-foreground",children:["(",H.length,"/",o,")"]})]})]}),(0,t.jsx)($.Dialog,{open:U,onOpenChange:O,children:(0,t.jsxs)($.DialogContent,{children:[(0,t.jsx)($.DialogHeader,{children:(0,t.jsx)($.DialogTitle,{children:"Insert Link"})}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.Label,{children:"URL"}),(0,t.jsx)(l.Input,{value:Q,onChange:e=>W(e.target.value),placeholder:"https://example.com"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.Label,{children:"Text (optional)"}),(0,t.jsx)(l.Input,{value:G,onChange:e=>K(e.target.value),placeholder:"Link text"})]})]}),(0,t.jsxs)($.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:()=>{if(Q){let e=G||Q;ea(`[${e}](${Q})`,""),W(""),K(""),O(!1)}},disabled:!Q,children:"Insert"})]})]})}),(0,t.jsx)($.Dialog,{open:E,onOpenChange:V,children:(0,t.jsxs)($.DialogContent,{children:[(0,t.jsx)($.DialogHeader,{children:(0,t.jsx)($.DialogTitle,{children:"Insert Image"})}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.Label,{children:"Image URL"}),(0,t.jsx)(l.Input,{value:X,onChange:e=>Y(e.target.value),placeholder:"https://example.com/image.jpg"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(T.Label,{children:"Alt Text (optional)"}),(0,t.jsx)(l.Input,{value:_,onChange:e=>J(e.target.value),placeholder:"Image description"})]})]}),(0,t.jsxs)($.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:()=>{X&&(ea(`![${_||"image"}](${X})`,""),Y(""),J(""),V(!1))},disabled:!X,children:"Insert"})]})]})})]})}var H=e.i(8591),R=e.i(9481),F=e.i(6898),q=e.i(52400),P=e.i(98152),U=e.i(41659);function O(){let{user:e}=(0,n.useAuth)(),d=(0,o.useRouter)(),[c,h]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[x,p]=(0,s.useState)(""),[g,y]=(0,s.useState)([]),[b,f]=(0,s.useState)(!1),[v,j]=(0,s.useState)(null),[k,w]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/forum/categories"),t=await e.json(),s=Array.isArray(t)?t:t.categories||[];s.length>0&&(y(s),p(s[0].id))}catch(e){console.error("Failed to fetch categories")}})()},[]);let N=async e=>{if(e.preventDefault(),c.trim()&&u.trim()){f(!0),j(null);try{let e=k.filter(e=>"image"===e.type&&!e.error&&!e.uploading).map(e=>e.url),t=await fetch("/api/forum/threads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:c,content:u,categoryId:x,images:e})}),s=await t.json();if(t.ok){let e="pending"===s.status;j({success:!0,message:e?"Your post has been submitted and is awaiting admin approval.":"Your post has been published successfully!"}),e?setTimeout(()=>d.push("/forum"),3e3):setTimeout(()=>d.push(`/forum/thread/${s.id}`),2e3)}else j({success:!1,message:s.error||"Failed to create thread"})}catch{j({success:!1,message:"An error occurred. Please try again."})}finally{f(!1)}}};return e?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(a.Sidebar,{}),(0,t.jsxs)("main",{className:"md:ml-72 transition-all duration-300",children:[(0,t.jsx)(r.Header,{}),(0,t.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,t.jsx)("div",{className:"h-14 w-14 rounded-2xl bg-gradient-to-br from-primary to-accent flex items-center justify-center glow-sm",children:(0,t.jsx)(U.Sparkles,{className:"h-7 w-7 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Create New Thread"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Share your thoughts with the community"})]})]}),(0,t.jsx)("div",{className:"glass rounded-xl p-4 mb-6 border border-amber-500/30 bg-amber-500/5",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(F.AlertCircle,{className:"h-5 w-5 text-amber-500 shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:"Moderation Notice"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"All new posts require admin approval before they become visible to the community."})]})]})}),v&&(0,t.jsx)("div",{className:`glass rounded-xl p-4 mb-6 ${v.success?"border-emerald-500/30 bg-emerald-500/5":"border-red-500/30 bg-red-500/5"}`,children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[v.success?(0,t.jsx)(q.CheckCircle,{className:"h-5 w-5 text-emerald-500 shrink-0 mt-0.5"}):(0,t.jsx)(F.AlertCircle,{className:"h-5 w-5 text-red-500 shrink-0 mt-0.5"}),(0,t.jsx)("p",{className:"text-foreground",children:v.message})]})}),(0,t.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"glass rounded-2xl p-6 space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-foreground mb-3",children:[(0,t.jsx)(P.Tag,{className:"h-4 w-4 text-primary"}),"Category"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:g.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>p(e.id),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${x===e.id?"bg-primary text-primary-foreground shadow-lg shadow-primary/25":"bg-secondary/50 text-muted-foreground hover:bg-secondary hover:text-foreground"}`,children:e.name},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Title ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(l.Input,{value:c,onChange:e=>h(e.target.value),placeholder:"Enter a descriptive title for your thread...",className:"bg-secondary/50 border-border h-12 text-lg",maxLength:200,required:!0}),(0,t.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Make it clear and engaging"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[c.length,"/200"]})]})]})]}),(0,t.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-foreground mb-3",children:["Content ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(A,{value:u,onChange:m,placeholder:"Write your post content here... Use the toolbar above for formatting.",minHeight:"300px",files:k,onFilesChange:w,maxFiles:10}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Minimum 10 characters. Supports Markdown formatting."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:()=>d.back(),className:"flex-1 h-12",children:"Cancel"}),(0,t.jsx)(i.Button,{type:"submit",disabled:b||!c.trim()||u.length<10,className:"flex-1 h-12 bg-gradient-to-r from-primary to-accent hover:opacity-90 gap-2",children:b?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.Send,{className:"h-4 w-4"}),"Submit for Review"]})})]})]})]})]})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(a.Sidebar,{}),(0,t.jsxs)("main",{className:"md:ml-72 transition-all duration-300",children:[(0,t.jsx)(r.Header,{}),(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[80vh] p-6",children:(0,t.jsxs)("div",{className:"text-center glass rounded-2xl p-8 max-w-md",children:[(0,t.jsx)("div",{className:"h-20 w-20 rounded-2xl bg-gradient-to-br from-primary to-accent flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)(H.MessageSquare,{className:"h-10 w-10 text-white"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Login Required"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"Please login with Discord to create a new thread and participate in the community."}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsxs)(i.Button,{onClick:()=>{window.location.href="/api/auth/signin/discord"},className:"w-full h-12 bg-[#5865F2] hover:bg-[#4752C4] gap-2",children:[(0,t.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})}),"Login with Discord"]}),(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>d.push("/forum"),className:"w-full h-12",children:"Back to Forum"})]})]})})]})]})}e.s(["default",()=>O],86323)}]);